<h1 class="title">
    Implantación, configuración y administración de servidores web.
</h1><div class="iDevice_content">
    <p style="text-align: center;">
        <strong style="font-size: 1em;">
        </strong>
    </p>
    <p>
        <strong style="font-size: 1em;">
            Juan
        </strong>
        <span style="font-size: 1em;">
           , con su perfil de Técnico
                    Superior en Desarrollo de Aplicaciones Web, va a trabajar para la empresa
          </span>
        <strong style="font-size: 1em;">
            BK programación.
        </strong>
        <span style="font-size: 1em;">
           Por ese motivo, ha
                    decidido documentar, en una
          </span>
        <span lang="en" style="font-size: 1em;">
          </span>
        <span lang="en" style="font-size: 1em;">
           <span lang="en">
            wiki
           </span>
          </span>
        <span style="font-size: 1em;">
           interna para los miembros de la empresa, los conocimientos que va a ir
                    adquiriendo durante su vida laboral respecto a los trabajos que le toque realizar. De este modo, a
                    los compañeros y compañeras que le sucedan o que tengan que realizar labores similares les será útil
                    esta información.
          </span>
    </p>
    <p>
        <strong>
            Juan
        </strong>
        ha pensado en incluir un tema titulado
        <strong>
            Implantación de
            arquitecturas web
        </strong>
        que estructurará en varios apartados.
    </p>
    <p>
          <span style="font-size: 1em;">
           Para realizar este trabajo va a contar con la
                    colaboración de sus amigos
          </span>
        <strong style="font-size: 1em;">
            Carlos
        </strong>
        <span style="font-size: 1em;">
           y
          </span>
        <strong style="font-size: 1em;">
            Ana
        </strong>
        <span style="font-size: 1em;">
           , estudiantes ambos de Ciclos de Informática.
          </span>
    </p>
    <p>
          <span style="font-size: 1em;">
           Por otra parte, a la empresa
          </span>
        <strong style="font-size: 1em;">
            BK
            Programación
        </strong>
        <span style="font-size: 1em;">
           le ha surgido un nuevo proyecto: una empresa con
                    varias sucursales quiere montar una aplicación web por sucursal.
          </span>
    </p>
    <p>
        <strong>
            Ada,
        </strong>
        la directora, considera que para afrontar este proyecto y
        atender así la demanda ofrecida, deben
        <strong>
            configurar un nuevo equipo servidor, de cuya
            administración también se encargarán desde BK Programación.
        </strong>
    </p>
    <p>
        Para tal fin se reúne con
        <strong>
            María
        </strong>
        y con
        <strong>
            Juan.
        </strong>
    </p>
    <p style="text-align: center;">
        <strong>
        </strong>
    </p>
</div><h1 class="title">
    1.- Fundamentos de la web.
</h1><div class="iDevice_content">

    <p>
        <strong>
            <br>
            <br/></strong>
        , después de hablar con
        <strong>
            María
        </strong>
        , ha empezado la documentación de la
        <span lang="en">
           wiki
          </span>
        explicando los
        aspectos básicos de la arquitectura web, ya que considera que es un medio que es necesario conocer con
        precisión si se pretende realizar el despliegue de una aplicación web. Para ello ha pensado en definir
        conceptos básicos de las interfaces web.
    </p>
</div><h1 class="title">
    1.1.- ¿Qué aspectos generales de arquitecturas web debes conocer?
</h1><div class="iDevice_content">

    <p>
        <span style="font-size: 1em;">
         La arquitectura
        </span>
        <span lang="en" style="font-size: 1em;">
        </span>
        <span lang="en">
         <span lang="en" style="font-size: 1em;">
          World Wide Web
         </span>
         <span style="font-size: 1em;">
         </span>
        </span>
        <span style="font-size: 1em;">
         (
        </span>
        <abbr title="World Wide Web">
            WWW
        </abbr>
        <span style="font-size: 1em;">
         ) de
                Internet provee un modelo de programación sumamente poderoso y flexible. Las aplicaciones y los
                contenidos son presentados en formatos de datos estándar y son localizados por aplicaciones conocidas
                como "
        </span>
        <span lang="en" style="font-size: 1em;">
         web browsers
        </span>
        <span style="font-size: 1em;">
         ",
                que envían requerimientos de objetos a un servidor y éste responde con el dato codificado según un
                formato estándar.
        </span>
    </p>
    <p>
        Los estándares
        <abbr title="World Wide Web">
            WWW
        </abbr>
        especifican
        muchos de los mecanismos necesarios para construir un ambiente de aplicación de propósito general, por
        ejemplo:
    </p>
    <ul class="lista_verificacion">
        <li>
            <strong>
                Modelo estándar de nombres:
            </strong>
            todos los servidores, así como el contenido de la
            <abbr title="World Wide Web">
                WWW
            </abbr>
            se denominan según un Localizador Uniforme
            de Recursos (
            <span lang="en">
          Uniform Resource Locator
         </span>
            :
            <abbr title="Uniform Resource Locator">
                URL
            </abbr>
            ).
        </li>
        <li>
            <strong>
                Contenido:
            </strong>
            a todos los contenidos en la
            <abbr title="World Wide Web">
                WWW
            </abbr>
            se les especifica un determinado tipo, permitiendo de esta forma que los
            <span lang="en">
          browsers
         </span>
            (navegadores) los interpreten correctamente.
        </li>
        <li>
            <strong>
                Formatos de contenidos estándar:
            </strong>
            todos los navegadores soportan un conjunto de
            formatos y tecnologías estándar, por ejemplo
            <abbr title="HyperText Markup Language ">
                HTML
            </abbr>
            (Lenguaje de marcas de hipertexto),&nbsp; ECMAScript
            <del datetime="2016-09-23T11:01:58">
            </del>
            (
            <span lang="en">
          JavaScript)
         </span>
            ,
            <abbr title="Cascading Style Sheets">
                CSS
            </abbr>
            ,
            <abbr title="etcétera.">
                etc
            </abbr>
            .
        </li>
        <li>
            <strong>
                Protocolos estándar:
            </strong>
            éstos permiten que cualquier navegador pueda comunicarse con
            cualquier servidor web. El más comúnmente usado en
            <abbr title="World Wide Web">
                WWW
            </abbr>
            es
            <abbr title="HyperText Markup Language ">
            </abbr>
            <abbr title="HiperText Transfer Protocol">
                HTTP
            </abbr>
            (Protocolo
            de&nbsp;Transferencia de HiperTexto), que opera sobre el conjunto de protocolos
            <abbr lang="en" title="Transmission Control Protocol /Internet Protocol,">
                TCP/IP
            </abbr>
            (Protocolo de
            Control de Transmisión / Protocolo de Internet).
        </li>
    </ul>
    <p>
        Esta infraestructura permite a los usuarios acceder a una gran cantidad de aplicaciones y
        servicios de terceros. También permite a los desarrolladores crear aplicaciones y servicios para una gran
        comunidad de clientes.
    </p>
    <p>
        Los aspectos generales a destacar en una arquitectura web son los siguientes:
    </p>
    <ul class="lista_verificacion">
        <li>
            Escalabilidad.
        </li>
        <li>
            Separación de responsabilidades.
        </li>
        <li>
            Portabilidad.
        </li>
        <li>
            Utilización de componentes en los servicios de infraestructura.
        </li>
        <li>
            Gestión de las sesiones del usuario.
        </li>
        <li>
            Aplicación de patrones de diseño.
        </li>
    </ul>
    <p>
        El esquema de funcionamiento de los servicios web requiere de tres elementos
        fundamentales:
    </p>
    <ol>
        <li>
            <strong>
                Proveedor del servicio web
            </strong>
            , que es quien lo diseña, desarrolla e implementa y lo pone
            disponible para su uso, ya sea dentro de la misma organización o en público.
        </li>
        <li>
            <strong>
                Consumidor del servicio
            </strong>
            , que es quien accede al componente para utilizar los
            servicios que éste presta.
        </li>
        <li>
            <strong>
                Agente del servicio
            </strong>
            , que sirve como enlace entre proveedor y consumidor para efectos
            de publicación, búsqueda y localización del servicio.
        </li>
    </ol>
</div><h1 class="title">
    1.2.- El servicio web e Internet.
</h1><div class="iDevice_content">

    <p>
        <br>
        Internet, tal y como la conocemos hoy día, utiliza para su funcionamiento la arquitectura de
        protocolos
        <abbr title="Transmission Control Protocol / Internet Protocol">
            TCP/IP
        </abbr>
        .
        Lo importante de
        <abbr title="Transmission Control Protocol / Internet Protocol">
            TCP/IP
        </abbr>
        es que permite la comunicación de equipos que están en diferentes redes a
        través de una arquitectura flexible.
        <br/></p>
    <p>
        Como supondrás, cuando accedemos a un sitio web a través de un navegador web, el navegador web inicia una
        o más comunicaciones con un sistema remoto y se produce un intercambio de paquetes que permite mostrar la
        página web. Veamos el proceso más detalladamente:
    </p>
    <ul class="lista_verificacion">
        <li>
            El navegador realiza una petición de un recurso al servidor web (imagen,
            <abbr title="HiperText Markup Language">
                HTML
            </abbr>
            ,
            <abbr lang="es" title="etcétera">
                etc
            </abbr>
            .).
        </li>
        <li>
            El servidor web recibe la petición y la procesa. Procesar la petición en el servidor web puede
            significar dos cosas diferentes:
            <ul class="lista_verificacion">
                <li>
                    Servir un recurso estático, es decir, el contenido de un archivo almacenado en el disco del
                    servidor.
                </li>
                <li>
                    Ejecutar una aplicación en el servidor que genere contenido dinámico.
                </li>
            </ul>
        </li>
        <li>
            El navegador web recibe el contenido del servidor y es el encargado de mostrarlo al usuario final, a
            través de un proceso conocido como renderizado. En el proceso de renderizado el navegador web convierte
            los datos recibidos en información que el usuario puede ver en la pantalla de su ordenador.
        </li>
        <li>
            Si para renderizar y representar la página web el navegador necesita más recursos (imágenes, archivos
            <abbr title="Cascading Style Sheets">
                CSS
            </abbr>
            ,
            <abbr lang="es" title="etcétera">
                etc
            </abbr>
            .), los volvería a pedir al navegador, siguiendo el proceso anterior.
        </li>
    </ul>
    <p>
        El protocolo que permite todo ese proceso anterior es
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        .
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        es el
        protocolo que permite al navegador realizar una petición y al servidor generar una respuesta, y es
        importante entenderlo antes de configurar un servidor web.
    </p>
    <p>
        Pero si ha triunfado la web y ha llegado hasta donde está hoy día, no es solo por el protocolo
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        , sino también por otras cosas:
    </p>
    <ul class="lista_verificacion">
        <li>
            El sistema
            <abbr title="Domain Name System">
                DNS
            </abbr>
            , que permite traducir un nombre
            de máquina en una dirección
            <abbr title="Internet Protocol">
                IP
            </abbr>
            . El sistema
            <abbr title="Domain Name System">
                DNS
            </abbr>
            nos permite acceder a una máquina remota a
            través de un nombre (como&nbsp;www.gnu.org o
            <code>
                www.debian.org
            </code>
            ).
        </li>
        <li>
            El uso de
            <abbr title="Uniform Resource Locator">
                URLs
            </abbr>
            (
            <span lang="en">
          Uniform
                  Resource Locator
         </span>
            ). Una
            <abbr title="Uniform Resource Locator">
                URL
            </abbr>
            es una
            nomenclatura pensada para poder nombrar recursos en la red de forma sencilla, por ejemplo:
            http://www.gnu.org).
        </li>
        <li>
            Por el ingenio de muchos desarrolladores y desarrolladoras web que con
            <abbr title="HiperText Markup Language">
                HTML
            </abbr>
            ,
            <abbr title="Cascading Style Sheets">
                CSS
            </abbr>
            y JavaScript, y tecnologías del lado del servidor, consiguen hacer páginas
            webs increíbles.
        </li>
    </ul>
    <p>
        De todos estos conceptos, el que vamos a revisar ahora es el de
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        . Para entender una
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        lo mejor es analizar un ejemplo de
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        y desglosarla en partes:
    </p>
    <p style="text-align: center;">
        <strong>
            http://es.wikipedia.org/wiki/Localizador_de_recursos_uniforme
        </strong>
    </p>
    <p>
        En la
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        anterior aparecen las
        siguientes partes:
    </p>
    <ul class="lista_verificacion">
        <li>
            <strong>
                Esquema
            </strong>
            . El esquema es donde pone http: y representa el protocolo usado para acceder
            al recurso. Los esquemas más usados son http:,
            <code>
                https:
            </code>
            (protocolo
            <abbr title="HiperText Transfer Protocol Secure">
                HTTPS
            </abbr>
            ) y ftp: (protocolo
            <abbr title="Fiile Tranfer Protocol">
                FTP
            </abbr>
            ), aunque hay otros esquemas como&nbsp;tel:
            (para hacer referencia a un número de teléfono),&nbsp;mailto: (para hacer referencia a un correo
            electrónico), y bastantes más.
        </li>
        <li>
            <strong>
                Nombre de máquina o
                <abbr title="Full Qualified Domain Name">
                    FQDN
                </abbr>
            </strong>
            . En este caso es&nbsp;es.wikipedia.org y hace referencia a la
            máquina a la que estamos accediendo.
        </li>
        <li>
            <strong>
                Ruta hasta el recurso
            </strong>
            . En este caso sería /wiki/Localizador_de_recursos_uniforme, y
            hace referencia al camino a seguir para llegar al recuso.
        </li>
    </ul>
    <p>
        Si alguna
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        necesita
        <strong>
            usuario y
            contraseña
        </strong>
        (por ejemplo, si usamos el esquema ftp), entonces podemos escribirlo de la siguiente
        forma:
    </p>
    <ul class="lista_verificacion">
        <li>
            ftp://anonymous&#64;ftp.rediris.es/mirror/Apache/: donde anonymous sería el nombre de usuario.
        </li>
        <li>
            ftp://anonymous:contraseña&#64;ftp.rediris.es/mirror/Apache/: donde anonymous:contraseña son la
            combinación del usuario y su contraseña separados por dos puntos.
        </li>
    </ul>
    <p>
        Y por último, como se verá más adelante, si un protocolo se usa en un puerto diferente al puerto por
        defecto o estándar, podemos usar el siguiente formato de
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        :
    </p>
    <ul class="lista_verificacion">
        <li>
            http://www.ejemplodedominio.com:8080/mirecurso; donde&nbsp;8080 es el puerto que se usaría en este
            caso para acceder al servicio remoto.
        </li>
    </ul>
    <p>
    </p>
    <p>
    </p>
    <p>
    </p>
</div><h1 class="title">
    1.3.- El protocolo HTTP.
</h1><div class="iDevice_content">

    <p>
        <br>
        El protocolo
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        permite realizar la transferencia
        de información entre un cliente web y un servidor web en Internet, dando lugar a lo que hoy día se conoce
        como
        <span lang="en">
         World Wide Web
        </span>
        . Este protocolo ha pasado por varias versiones, desde la
        inicial 0.9 hasta la actual 2.0 (
        <abbr lang="en" title="HiperText Transfer Protocol version 2.0">
            HTTP/2
        </abbr>
        ). La versión más extendida actualmente es la versión
        <abbr lang="en" title="HiperText Transfer Protocol version 1.1">
            HTTP/1.1
        </abbr>
        , definido en el
        <abbr lang="en" title="Request For Comment">
            RFC
        </abbr>
        2616, pero la versión 2.0 se irá imponiendo poco a poco
        de forma natural. Veamos cuales son las características principales de la versión
        <abbr lang="en" title="HiperText Transfer Protocol version 1.1">
            HTTP/1.1
        </abbr>
        :
        <br/></p>
    <ul class="lista_verificacion">
        <li>
            Es un protocolo del nivel de aplicación, por lo que está destinado a que aplicaciones en sistemas
            diferentes se comuniquen entre sí.
        </li>
        <li>
            Es un protocolo sin estado, no hay consciencia de las peticiones anteriores, simplemente se hace una
            petición de un recurso y se obtiene el recurso. Por lo que es un protocolo donde la comunicación
            consiste en realizar una petición y obtener una respuesta del servidor a dicha petición.
        </li>
        <li>
            Las peticiones de recursos desde un cliente web al servidor web se hacen en formato texto "legible"
            por un ser humano, también lo son las respuestas por parte del servidor.
        </li>
        <li>
            No existe el concepto de sesión y no es necesario autenticarse para realizar la petición de un
            recurso.
        </li>
    </ul>
    <p>
        Como puedes ver el protocolo
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        es muy simple, por lo
        que cuando desarrollamos una aplicación web es necesario que cosas como la autenticación sea implementada
        por la aplicación web, dado que el protocolo no provee de mecanismos para ello.
    </p>
    <p>
        Para el seguimiento del usuario, y en consecuencia, para la gestión de la información de sesión, se
        utilizan
        <span lang="en">
         cookies
        </span>
        . Las
        <span lang="en">
         cookies
        </span>
        son pequeños archivos de
        textos almacenados en el sistema del cliente, donde se guarda temporalmente información que proviene del
        servidor web. La aplicación web generará una "
        <span lang="en">
         cookie
        </span>
        " que el cliente web almacenará
        durante un periodo de tiempo, y el cliente web volverá a enviar al servidor web dicha
        <span lang="en">
         cookie
        </span>
        cada vez que se haga una petición a la misma aplicación web. De esta forma, la
        aplicación web que se ejecuta en un servidor web podrá almacenar en el cliente información, como por
        ejemplo los productos que el usuario visito anteriormente o el listado de productos que tiene almacenado
        en el carrito de la compra.
    </p>
    <p>
        Cuando un cliente web (un navegador por ejemplo) accede a un recurso, se sigue el siguiente
        procedimiento:
    </p>
    <ul class="lista_verificacion">
        <li>
            El cliente web se conecta al servidor web.
        </li>
        <li>
            El cliente web envía una peticición al servidor. Existen diferentes métodos para realizar la petición,
            los más comunes son los métodos GET y
            <code>
                POST
            </code>
            .
        </li>
        <li>
            El servidor envía una respuesta al cliente, donde, si todo ha ido bien, se incluye el tipo de
            contenido, su longitud y el contenido en sí.
        </li>
    </ul>
    <p>
        Para entender mejor este proceso, veamos un ejemplo de comunicación entre un cliente web y navegador web.
        Supongamos que en un navegador web ponemos la
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        siguiente: http://www.rediris.es/rediris/. En este caso nuestro navegador se
        pondrá en contacto con el sistema www.rediris.es y enviará una petición
        <abbr lang="en" title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        usando el método GET que tendrá el siguiente
        aspecto:
    </p>
    <div class="pre-code">
        <div style="text-align: left;">
            <p>
                <strong>
                    GET /rediris/ HTTP/1.1
                    <br>
                    Host:
                    <br/></strong>
                www.rediris.es
                <br>
                <strong>
                    User-Agent
                </strong>
                :
                Mozilla/5.0 (Windows NT 10.0; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0
                <br>
                <strong>
                    Accept:
                </strong>
                text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
                <br>
                <strong>
                    Accept-Language:
                </strong>
                en-US,en;q=0.5
                <br>
                <strong>
                    Accept-Encoding:
                </strong>
                gzip, deflate
                <br>
                <strong>
                    Referer:
                </strong>
                http://www.rediris.es/
                <br>
                <strong>
                    Cookie:
                </strong>
                language=en
                <br>
                <strong>
                    Connection:
                </strong>
                keep-alive
                <br/><br/><br/><br/><br/><br/><br/></p>
        </div>
    </div>
    <p>
        La petición anterior comienza indicando el método
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        (GET), el recurso (/rediris/) y la versión del protocolo
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        (
        <abbr lang="en" title="HiperText Transfer Protocol version 1.1">
            HTTP/1.1
        </abbr>
        ). A continuación, el navegador incluye varias cabeceras de petición
        (User-Agent,
        <code>
            Accept
        </code>
        , Cookie,
        <abbr lang="es" title="etcétera">
            etc
        </abbr>
        .) que le permitirán
        al servidor web, y a una potencial aplicación web que procese la petición
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        , generar una respuesta más completa. El servidor
        responderá con una respuesta que tendrá el siguiente aspecto:
    </p>
    <div class="pre-code">
        <div style="text-align: left;">
            <p>
                <strong>
                    HTTP/1.1 200 OK
                </strong>
                <br>
                <strong>
                    Date:
                </strong>
                Thu, 11 May 2017 21:33:53
                GMT
                <br>
                <strong>
                    Server
                </strong>
                : Apache/2.2.3 (Red Hat)
                <br>
                <strong>
                    Content-Location:
                </strong>
                index.html.en
                <br>
                <strong>
                    Vary:
                </strong>
                negotiate,accept-language
                <br>
                <strong>
                    TCN:
                </strong>
                choice
                <br>
                <strong>
                    Last-Modified:
                </strong>
                Thu, 04 May 2017 10:03:20 GMT
                <br>
                <strong>
                    Etag:
                </strong>
                "616903-22f3-54eafe1e9ea00"
                <br>
                <strong>
                    Accept-Ranges:
                </strong>
                bytes
                <br>
                <strong>
                    Content-Length:
                </strong>
                8947
                <br>
                <strong>
                    Set-Cookie:
                </strong>
                language=en; path=/;
                domain=rediris.es
                <br>
                <strong>
                    Cache-Control:
                </strong>
                no-cache
                <br>
                <strong>
                    Connection:
                </strong>
                close
                <br>
                <strong>
                    Content-Type:
                </strong>
                text/html; charset=UTF-8
                <br>
                <strong>
                    Content-Language:
                </strong>
                en
                <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/></p>
        </div>
    </div>
    <p>
        El trozo anterior es solamente la cabecera de respuesta, que comienza por la versión del protocolo
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        (
        <abbr lang="en" title="HiperText Transfer Protocol version 1.1">
            HTTP/1.1
        </abbr>
        ), seguido de un código de respuesta (200) y un texto que dependiendo del caso
        puede variar (en el caso del código 200 suele ser u&nbsp;OK o
        <code>
            Document follows
        </code>
        ). Después de
        esa primera parte, se incluyen varias cabeceras de respuesta (Date,
        <code>
            Set-Cookie
        </code>
        , Server, ...)
        con información que el cliente web debe tener en cuenta. ¿Y dónde va la información? Justo después de
        terminar las cabeceras, el servidor incluirá una línea vacía y, a continuación, el documento o recurso.
    </p>
    <p>
        La diferencia fundamental entre
        <abbr lang="en" title="HiperText Transfer Protocol version 1.1">
            HTTP/1.1
        </abbr>
        y
        <abbr title="HiperText Transfer Protocol Version 1.2">
            HTTP/1.2
        </abbr>
        , y
        <abbr title="HiperText Transfer Protocol Version 2">
            HTTP/2.0
        </abbr>
        es que
        <abbr title="HiperText Transfer Protocol Version 2">
            HTTP/2.0
        </abbr>
        hace un uso más eficiente de la red que sus predecesores. Para ello
        necesita entre otras cosas que la comunicación sea en
        <strong>
            binario
        </strong>
        y no en texto legible por
        un ser humano. Los métodos y las cabeceras no cambian prácticamente, pero se optimiza la comunicación y
        esto hace que el contenido pueda ser transferido desde el servidor web al cliente web más rápidamente.
    </p>
</div><h1 class="title">
    1.4.- Uso del servicio HTTP.
</h1><div class="iDevice_content">

    <p>
        <span style="font-size: 1em;">
         Ahora que ya conocemos los fundamentos del protocolo
         <abbr title="HiperText Transfer Protocol">
          HTTP
         </abbr>
         , vamos a profundizar un poco más en él.
                Para empezar, v
        </span>
        <span style="font-size: 1em;">
         eamos los principales métodos (también llamado
                "verbos") usados para realizar una petición al servidor web.
        </span>
    </p>
    <ul class="lista_verificacion">
        <li>
            Método
            <span lang="en">
          <strong>
           GET
          </strong>
         </span>
            : se usa para obtener un recurso, y en general, no
            admite que el cliente web envíe datos al servidor. Si queremos usar este método para enviar datos al
            servidor los datos deben formar parte del recurso solicitado, usando por ejemplo una cadena de consulta
            (
            <span lang="en">
          query string
         </span>
            ). Por ejemplo:
            <ul class="lista_verificacion">
                <li>
                    Si ponemos la
                    <abbr title="Uniform Resource Locator">
                        url
                    </abbr>
                    http://www.estoesunejemplo.com/mipagina.php, se generaría una petición
                    <abbr title="HiperText Transfer Protocol">
                        HTTP
                    </abbr>
                    del estilo a GET /mipagina.php
                    HTTP/1.1.
                </li>
                <li>
                    Si ponemos la
                    <abbr title="Uniform Resource Locator">
                        url
                    </abbr>
                    http://www.estoesunejemplo.com/mipagina.php?dato1=a&amp;dato2=2, se generaría una petición
                    <abbr title="HiperText Transfer Protocol">
                        HTTP
                    </abbr>
                    del estilo a GET
                    /mipagina.php?dato1=a&amp;dato2=2 HTTP/1.1. La diferencia con el anterior es que se ha añadido una
                    cadena de consulta que se procesará internamente por la aplicación web (en este caso escrita en
                    <abbr title="Hypertext Preprocessor">
                        php
                    </abbr>
                    ) para generar el contenido de forma
                    dinámica.
                </li>
            </ul>
        </li>
        <li>
            Método
            <span lang="en">
          <strong>
           POST
          </strong>
         </span>
            : se usa para enviar datos al servidor, los datos
            no irán en el recurso solicitado (como es el caso del
            <span lang="en">
          query string
         </span>
            ), sino que se
            enviarán después de las cabeceras de petición (cabeceras, línea en blanco y a continuación los datos).
            De esta forma, los datos enviados al servidor no se ven en la
            <abbr title="Uniform Resource Locator">
                URL
            </abbr>
            y quedan ocultos a los ojos del usuario. La respuesta del servidor será
            también contenido que se podrá visualizar en el navegador (generalmente una página web).
        </li>
        <li>
            Método
            <span lang="en">
          <strong>
           HEAD
          </strong>
         </span>
            : permite obtener datos de un recurso sin que el
            servidor llegue a enviarlo al cliente. Se obtendría por ejemplo la fecha de la última modificación de
            una imagen y su tamaño, lo cual es útil para mantener una caché en el navegador con los contenidos
            descargados más habitualmente o más recientemente.
        </li>
    </ul>
    <p>
        Hoy día
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        va más allá de la simple
        navegación web (usando un navegador web como
        <span lang="en">
         Firefox
        </span>
        o
        <span lang="en">
         Chrome
        </span>
        ). Este protocolo también se utiliza en lo que se conoce como servicio web o
        <span lang="en">
         Web Service
        </span>
        (aplicaciones web que usan o proveen de un
        <span lang="en">
         Web
                Service
        </span>
        ). Un
        <span lang="en">
         Web Service
        </span>
        es un
        <abbr title="Application Programming Interface">
            API
        </abbr>
        que permite a otra aplicación
        comunicarse remotamente para acceder a un servicio. Por ejemplo, con el
        <span lang="en">
         Web Service
        </span>
        de
        <span lang="en">
         Twitter
        </span>
        podemos publicar
        <span lang="en">
         twits
        </span>
        desde una aplicación de
        escritorio que hayamos realizado, para ello nuestra aplicación web se conectaría al
        <abbr title="Application Programming Interface">
            API
        </abbr>
        de
        <span lang="en">
         Twitter
        </span>
        vía
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        . Las ventajas de los
        <span lang="en">
         Web Services
        </span>
        son innumerables, y no vamos a entrar aquí en detalle, y su base es el
        protocolo
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        . En el contexto de un
        <span lang="en">
         Web Service
        </span>
        los métodos
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        suelen tomar otra perspectiva (sobre todo cuando hablamos de servicios web que
        implementan un
        <abbr title="Application Programming Interface">
            API
        </abbr>
        REST
        ):
    </p>
    <ul class="lista_verificacion">
        <li>
            Método
            <span lang="en">
          <strong>
           GET
          </strong>
         </span>
            : se usa para obtener un recurso o entidad, por
            ejemplo, un mensaje de
            <span lang="en">
          twitter
         </span>
            que alguien haya publicado.
        </li>
        <li>
            Método
            <span lang="en">
          <strong>
           POST
          </strong>
         </span>
            : se usa para crear o enviar una entidad a la
            aplicación web, por ejemplo, un nuevo mensaje de
            <span lang="en">
          twitter
         </span>
            que nosotros vayamos a
            publicar.
        </li>
        <li>
            Método
            <span lang="en">
          <strong>
           PUT
          </strong>
         </span>
            : se utiliza para actualizar o reemplazar una
            entidad en un servidor web.
        </li>
        <li>
            Método
            <span lang="en">
          <strong>
           DELETE
          </strong>
         </span>
            : se utiliza para borrar un recurso o entidad del
            servidor web.
        </li>
    </ul>
    <p>
        Existen más métodos interesantes, pero estos son los más usados. Después de realizar una petición como
        las anteriores, sea el método que sea, el servidor generará una respuesta
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        que contendrá un código de estado de
        respuesta. El código de estado 200 OK ya se vio en el apartado anterior, pero existen otros códigos
        importantes que debes conocer:
    </p>
    <ul class="lista_verificacion">
        <li>
            <strong>
                1XX
            </strong>
            : los códigos de estado en el rango de 100 son
            <strong>
                respuestas
                informativas
            </strong>
            .
            <ul class="lista_verificacion">
                <li>
                    <strong>
                        100
                        <span lang="en">
            </span>
                    </strong>
                    <span lang="en">
            <strong>
             Continue
            </strong>
           </span>
                    :
                    significa que todo va bien por ahora y que el cliente debería seguir con la petición.
                </li>
            </ul>
        </li>
        <li>
            <strong>
                2XX
            </strong>
            : los códigos de estado en el rango de 200 son respuestas de
            <strong>
                éxito en la
                transferencia
            </strong>
            , por ejemplo:
            <ul class="lista_verificacion">
                <li>
                    <strong>
                        200
                        <span lang="en">
             OK
            </span>
                    </strong>
                    : significa que la respuesta ha tenido éxito y
                    generalmente implica que los datos van en la respuesta (depende del método de la petición).
                </li>
            </ul>
        </li>
        <li>
            <strong>
                3XX
            </strong>
            : los códigos de estado en el rango de 300 son respuestas de
            <strong>
                redirección
            </strong>
            ,
            <strong>
                el recurso ha cambiado de ubicación
            </strong>
            .
            <ul class="lista_verificacion">
                <li>
                    <strong>
                        301
                        <span lang="en">
            </span>
                    </strong>
                    <span lang="en">
            <strong>
             Moved
                        Permanently
            </strong>
           </span>
                    : significa que un recurso se ha movido a otro sitio de forma
                    permanente. El servidor web incluye una cabecera llamada Location: con la nueva ubicación. El
                    navegador realizará una petición a la nueva ubicación de forma transparente al usuario.
                </li>
                <li>
                    <strong>
                        302
                        <span lang="en">
             Found
            </span>
                    </strong>
                    : significa que un recurso se ha movido a otro
                    sitio de forma temporal. El funcionamiento es similar al 301.
                </li>
                <li>
                    Otras respuestas relacionadas con la redirección y el cambio de ubicaciones son la
                    <strong>
                        303
                        <span lang="en">
             See Other
            </span>
                    </strong>
                    ,
                    <strong>
                        307
                        <span lang="en">
             Temporary
                        Redirect
            </span>
                    </strong>
                    y
                    <strong>
                        308
                        <span lang="en">
             Permanent Redirect
            </span>
                    </strong>
                    .
                    Tienen connotaciones ligeramente diferentes a los códigos de estado 301 y 302, pero la idea es
                    similar.
                </li>
            </ul>
        </li>
        <li>
            <strong>
                4XX
            </strong>
            : los códigos de estado en el rango de 400 son respuestas en las que se indica que
            hay un
            <strong>
                error en la petición del cliente
            </strong>
            o que algo ha ido mal al procesarla. Veamos
            algunos ejemplos:
            <br>
            <ul class="lista_verificacion">
                <li>
                    <strong>
                        400
                        <span lang="en">
             Bad Request
            </span>
                    </strong>
                    : el servidor no entiende la petición
                    quizás porque está mal formada.
                </li>
                <li>
                    <strong>
                        401
                        <span lang="en">
             Unauthorized
            </span>
                    </strong>
                    : es necesario que el usuario se
                    autentique para acceder al recurso y dicha autenticación a fallado.
                </li>
                <li>
                    <strong>
                        403
                        <span lang="en">
             Forbidden
            </span>
                    </strong>
                    : el acceso al contenido solicitado no está
                    permitido.
                </li>
                <li>
                    <strong>
                        404
                        <span lang="en">
             Not Found
            </span>
                    </strong>
                    : posiblemente el código de estado más
                    conocido. El servidor responde con este código cuando el recurso solicitado no existe o no puede ser
                    encontrado.
                </li>
            </ul>
            <br/></li>
        <li>
            <strong>
                5XX
            </strong>
            : los códigos de estado que están en el rango de 500 simbolizan que se ha recibido
            una petición correcta pero que
            <strong>
                el servidor no ha podido completar la respuesta
            </strong>
            . Veamos
            algunos ejemplos:
            <br>
            <ul class="lista_verificacion">
                <li>
                    <strong>
                        500
                        <span lang="en">
             Internal Server Error
            </span>
                    </strong>
                    : generalmente significa que hay
                    un error en la configuración del servidor y que no se puede completar la respuesta.
                </li>
                <li>
                    <strong>
                        502
                        <span lang="en">
             Bad Gateway
            </span>
                    </strong>
                    : suele indicar que el servidor al que se
                    ha solicitado la petición actúa como una pasarela a otro servidor, y el segundo servidor no ha
                    respondido adecuadamente.
                </li>
                <li>
                    <strong>
                        503
                        <span lang="en">
             Service Unavailable
            </span>
                    </strong>
                    : el servidor no está disponible en
                    este momento.
                </li>
            </ul>
            <br/></li>
    </ul>
    <p>
    </p>
    <div class="exe-tooltip-text" id="t87b1f553-7c0e-c632-2884-a57cdbab5d98">
        <p>
         <span lang="en">
          Representational State Transfer
         </span>
            o REST es una técnica para implementar servicios
            web a través del protocolo HTTP donde, dependiendo del tipo de método usado en la petición, se hará una
            cosa u otra por parte de la aplicación web.
        </p>
    </div>
</div><h1 class="title">
    1.5.- Protocolo HTTP vs HTTPS.
</h1><div class="iDevice_content">

    <p>
        <span style="font-size: 1em;">
         -¿Quieres conservar la información de forma confidencial?¿Quieres
                transferir información de forma segura? Si estás pensando en este tipo de preguntas necesariamente estás
                pensando en el protocolo
         HTTPS
         y
        </span>
        <span style="font-size: 1em;">
         no en el protocolo
         HTTP
         .
        </span>
    </p>
    <p>
        El protocolo
        <abbr title="Hypertext Transfer Protocol Secure">
            HTTPS
        </abbr>
        permite que la información viaje de forma segura entre el cliente y el
        servidor, por la contra el protocolo
        <abbr title="HyperText Transfer Protocol">
            HTTP
        </abbr>
        envía la información en texto claro, esto es, cualquiera que accediese a la información transferida entre
        el cliente y el servidor puede ver el contenido exacto y textual de la información.
    </p>
    <p>
        Para asegurar la información, el protocolo
        <abbr title="Hypertext Transfer Protocol Secure">
            HTTPS
        </abbr>
        requiere de certificados y
        siempre y cuando sean validados la información será transferida cifrada. Pero cifrar la información
        requiere un tiempo de computación, por lo que será perjudicado el rendimiento del servidor web. Así, ¿es
        necesario que toda, absolutamente toda, la información sea transferida entre el cliente y servidor de
        forma cifrada? A lo mejor solamente es necesario que sea cifrada la autenticación a dicha información, por
        eso en algunas páginas web puede que el servidor esté configurado para que en todo el dominio esté cifrada
        su información o simplemente el intento de acceso a la misma.
    </p>
    <p>
        Un servidor web, como Apache, puede emitir certificados, pero puede que en algún
        navegador sea interpretado como peligroso, esto suele ser debido a que los navegadores poseen en su
        configuración una lista de Entidades Certificadoras que verifican, autentican y dan validez a los
        certificados. ¿Tú, confiarías en un
        <abbr title="Documento Nacional de Identidad">
            DNI
        </abbr>
        que no
        fuese certificado por una entidad de confianza como el Ministerio del Interior? Pues, lo mismo le pasa a
        los navegadores, solamente confían en quien confían. Eso no quiere decir que no puedes crear tus
        certificados en un servidor web, de hecho muchas empresas lo hacen, sobre todo para sitios internos o
        externos en los que solamente puede acceder personal autorizado por la propia empresa. Ahora si, si
        utilizas certificados mediante Apache en un sitio visible a través de Internet y accesible por cualquier
        usuario, o bien eres una empresa o entidad en la que de por si confía el usuario o la imagen de la empresa
        o entidad quedará muy mal parada, ya que lo más probable es que el usuario no aceptará la comunicación,
        por visionar en el navegador un aviso de problema de seguridad.
    </p>

    <p>
        El protocolo
        <abbr title="Hypertext Transfer Protocol Secure">
            HTTPS
        </abbr>
        utiliza cifrado sobre
        SSL/TLS
        que proporcionan
        autenticación y privacidad. Entonces, si necesitas que la información viaje cifrada debes emplear el
        protocolo
        <abbr title="Hypertext Transfer Protocol Secure">
            HTTPS
        </abbr>
        , en caso
        contrario el protocolo
        <abbr title="HyperText Transfer Protocol">
            HTTP.
        </abbr>
        Hay que dejar claro que la utilización del protocolo
        <abbr title="Hypertext Transfer Protocol Secure">
            HTTPS
        </abbr>
        no excluye ni impide el
        protocolo HTTP, los dos pueden convivir en un mismo dominio.
    </p>
    <p>
        Bien, pero, ¿cómo funcionan?
        <span style="nada: #ff6600;">
         <span style="nada: #ff9900;">
          Más o menos hemos visto ya el funcionamiento pero vamos a revisarlo para
                  entender la diferencia con
          <abbr title="HiperText Transfer Protocol Secure">
           HTTPS
          </abbr>
         </span>
         .
        </span>
        Cuando escribes una dirección
        <abbr title="Uniform Resource Locator.">
            URL
        </abbr>
        en el navegador, por ejemplo
        http://www.debian.org/index.es.html, antes de ver la página en el navegador existe todo un juego de
        protocolos
        <span style="nada: #ff9900;">
         que entran en acción
        </span>
        , sin profundizar en todos ellos, vamos
        ver el proceso que ocurre:
    </p>
    <ul class="lista_verificacion">
        <li>
            Se traduce el
            dominio DNS
            por una
            <span style="nada: #ff9900;">
          dirección
          <abbr title="Internet Protocol">
           IP
          </abbr>
         </span>
            <span style="nada: #ff9900;">
          (en este caso&nbsp;www.debian.org se traduce a una
                  dirección
          <abbr title="Internet Protocol">
           IP
          </abbr>
          )
         </span>
            .
        </li>
        <li>
         <span style="nada: #ffcc00;">
          Una vez obtenida la dirección
          <span style="nada: #ff9900;">
           <abbr title="Internet Protocol">
            IP
           </abbr>
          </span>
          se accede
                  al sistema remoto que tiene dicha
          <abbr title="Internet Protocol">
           IP
          </abbr>
          ,
                  concretamente al
          puerto
          80, que es el puerto
          TCP
          asignado por defecto al protocolo
          <abbr title="HiperText Transfer Protocol">
           HTTP
          </abbr>
         </span>
            .
        </li>
        <li>
         <span style="nada: #ff9900;">
          El cliente web entonces realiza la petición
          <abbr title="HiperText Transfer Protocol">
           HTTP
          </abbr>
          , solicitando un recurso (en este caso
                  podría ser GET /index.es.html HTTP/1.1, por ejemplo).
         </span>
        </li>
        <li>
            Si el servidor web aloja la página, ésta será transferida a tu navegador
            <span style="nada: #ff9900;">
          en la respuesta
          <abbr title="HiperText Transfer Protocol">
           HTTP
          </abbr>
         </span>
            .
        </li>
    </ul>
    <p>
        Sin embargo cuando escribes en el navegador una dirección
        <abbr title="Uniform Resource Locator.">
            URL
        </abbr>
        con llamada al protocolo
        <abbr title="Hypertext Transfer Protocol Secure">
            HTTPS
        </abbr>
        , el procedimiento es similar al
        anterior pero un poco más complejo:
    </p>
    <ul class="lista_verificacion">
        <li>
            Se traduce el dominio
            <abbr title="Domain Name System">
                DNS
            </abbr>
            por
            una
            <abbr title="Internet Protocol">
                IP.
            </abbr>
        </li>
        <li>
         <span style="nada: #ffcc00;">
          Una vez que se obtiene la
          <abbr title="Internet Protocol">
           IP
          </abbr>
          , se busca en el servidor web que aloja la página
                  solicitada el puerto 443, puerto
          <abbr title="Transmission Control Protocol">
           TCP
          </abbr>
          asignado por defecto al protocolo
          <abbr title="Hypertext Transfer Protocol Secure">
           HTTPS
          </abbr>
          .
         </span>
        </li>
        <li>
         <span style="nada: #ffcc00;">
          Pero ahora, antes de transferir la página a tu navegador
                  se inicia una negociación
          <abbr title="Secure Sockets Layer">
           SSL
          </abbr>
          , en la que
                  entre otras cosas el servidor envía su certificado de seguridad al navegador (el navegador, aunque es
                  poco habitual, también puede enviar el suyo), y si el certificado está firmado por un Entidad
                  Certificadora de confianza, el cliente web aceptará el certificado y se usará un canal seguro de
                  comunicación, donde toda la información irá cifrada.
         </span>
        </li>
        <li>
         <span style="nada: #ffcc00;">
          Una vez verificado el certificado servidor, se realiza el
                  proceso de petición
          <abbr title="HiperText Transfer Protocol">
           HTTP
          </abbr>
          y respuesta
          <abbr title="HiperText Transfer Protocol">
           HTTP
          </abbr>
          pero de forma cifrada.
         </span>
        </li>
    </ul>
    <p>
        <span style="nada: #ffcc00;">
         Puedes hacer que un servidor web para una determinada página
                acepte los protocolos
         <abbr title="HyperText Transfer Protocol">
          HTTP
         </abbr>
         y
         <abbr title="Hypertext Transfer Protocol Secure">
          HTTPS
         </abbr>
         en puertos
         <abbr title="Transmission Control Protocol">
          TCP
         </abbr>
         distintos del 80 y 443 respectivamente. Eso sí, cuando visites la página
                web, en la dirección
         <abbr title="Uniform Resource Locator">
          URL
         </abbr>
         debes especificar
                el puerto
         <abbr title="Transmission Control Protocol">
          TCP
         </abbr>
         . Por ejemplo, si
                nuestro servidor atiende peticiones
         <abbr title="HiperText Transfer Protocol">
          HTTP
         </abbr>
         en el
                puerto 8080 deberíamos poner http://www.tupagina.local:8080, de esta forma el cliente web enviará la
                petición de la página www.tupagina.local al puerto 8080. Del mismo modo si nuestro servidor atiende
                peticiones
         <abbr title="HiperText Transfer Protocol Secure">
          HTTPS
         </abbr>
         en el puerto
                4333, deberíamos escribir la
         <abbr title="Uniform Resource Locator">
          url
         </abbr>
         en el
                navegador de la siguiente forma: https://www.tupagina.local:4333. Como ves, puedes cambiar los puertos
                por defecto, pero ten en cuenta que cualquiera que quisiera acceder a esas páginas debería saber el
                puerto
         <abbr title="Transmission Control Protocol">
          TCP
         </abbr>
         de la solicitud.
                Entonces, ¿quiere decir que aunque no escribas el puerto
         <abbr title="Transmission Control Protocol">
          TCP
         </abbr>
         en las direcciones
         <abbr title="Uniform Resource Locator.">
          URL
         </abbr>
         estas se interpretan en el puerto 80 y 443 para el protocolo
         <abbr title="HyperText Transfer Protocol">
          HTTP
         </abbr>
         y
         <abbr title="Hypertext Transfer Protocol Secure">
          HTTPS
         </abbr>
         respectivamente? Pues si,
                así es. Es lo mismo escribir http://www.tupagina.local:80 que http://www.tupagina.local y es lo mismo
                escribir https://www.tupagina.local:443 que https://www.tupagina.local.
        </span>
    </p>
    <div class="exe-tooltip-text" id="ta8f84220-79a2-ba58-990b-760a4a25e2e7">
        <p>
            Hypertext Transfer Protocol Secure (en español: Protocolo seguro de transferencia de hipertexto), más
            conocido por sus siglas HTTPS, es un protocolo de aplicación basado en el protocolo HTTP, destinado a la
            transferencia segura de datos de Hipertexto, es decir, es la versión segura de HTTP. Es utilizado
            principalmente por entidades bancarias, tiendas en línea, y cualquier tipo de servicio que requiera el
            envío de datos personales y/o contraseñas.
        </p>
        <p style="text-align: right;">

        </p>
        <p>
        </p>
    </div>
    <div class="exe-tooltip-text" id="t9b54a86a-e8bb-e42a-9198-836a18bd368a">
        <p>
            Hypertext Transfer Protocol o HTTP (en español protocolo de transferencia de hipertexto) es el
            protocolo de comunicación que permite las transferencias de información en la World Wide Web. HTTP fue
            desarrollado por el World Wide Web Consortium y la Internet Engineering Task Force, colaboración que
            culminó en 1999 con la publicación de una serie de RFC, el más importante de ellos es el RFC 2616 que
            especifica la versión 1.1. HTTP define la sintaxis y la semántica que utilizan los elementos de software
            de la arquitectura web (clientes, servidores, proxies) para comunicarse.
        </p>
        <p style="text-align: right;">

        </p>
    </div>
    <div class="exe-tooltip-text" id="tc7274067-a147-a502-9364-67cc05ad13df">
        <p>
         <span lang="en">
          Secure Sockets Layer/Transport Layer Security.
         </span>
            Protocolos criptográficos
            que proporcionan conexiones seguras por una red, comúnmente Internet.
        </p>
    </div>
    <div class="exe-tooltip-text" id="tc78b3818-093a-0380-84a6-a35eeafd370b">
        <p>
            Nombre por el cual se reconoce a un grupo de dispositivos o equipos conectados a la red. Éstos pueden
            ser nombres locales, no existentes en Internet, pero en general tienen por finalidad su uso en Internet.
            Por ejemplo,&nbsp;debian.org
        </p>
    </div>
    <div class="exe-tooltip-text" id="ta89d5ab2-757a-8acd-14c4-199f1ae7ebad">
        <p>
            Número utilizado en las comunicaciones cliente/servidor en transmisiones
            <abbr title="Transmission Control Protocol">
                TCP
            </abbr>
            o
            <abbr title="User Datagram Protocol">
                UDP
            </abbr>
            comprendido entre 1 y 65535 que indica por
            dónde tiene lugar la conexión con un servidor. Están estandarizados, esto es, un servidor suele estar
            activo siempre por definición en un puerto determinado, pero éste puede variarse mediante configuración.
        </p>
    </div>
    <div class="exe-tooltip-text" id="t9e9f1992-c5f6-7a5d-ada8-9c35e85b8350">
        <p>
            Es uno de los protocolos fundamentales en Internet. Garantiza que los datos serán entregados en su
            destino sin errores y una vez recogidos, que se pondrán en el mismo orden en que se transmitieron.
        </p>
    </div>
</div><h1 class="title">
    2.- Implantación de arquitecturas web.
</h1><div class="iDevice_content">
    <p style="text-align: center;">
    </p>
    <p>
        <strong style="font-size: 1em;">
            Juan
        </strong>
        <span style="font-size: 1em;">
           ,
                    e
          </span>
        n un principio, considera importante realizar un resumen claro y conciso del concepto de
        arquitecturas web para incluir en su
        <span lang="en">
           wiki
          </span>
        , &nbsp;en donde pretende abarcar como
        mínimo los siguientes puntos:
    </p>
    <ul class="lista_verificacion">
        <li>
            Evolución de los servicios web.
        </li>
        <li>
            Tecnologías asociadas a las aplicaciones web.
        </li>
        <li>
            Tipos de aplicaciones web.
        </li>
        <li>
            Arquitecturas web.
        </li>
        <li>
            <abbr title="etcétera.">
                etc
            </abbr>
            .
        </li>
    </ul>
    <p>
        También pretende incluir en otro de los puntos el servidor web
        <span lang="en">
           Apache
          </span>
        , abarcando
        <strong>
            la instalación, la configuración básica e inicio de
            <span lang="en">
            Apache
           </span>
        </strong>
        , y está pensando documentar los mismos puntos para el servidor
        <span lang="en">
           Tomcat
          </span>
        .
    </p>
    <p>
        Finalmente, piensa crear un último punto en donde explicar
        <strong>
            el proceso de
            despliegue de una aplicación web
        </strong>
        ; explicando el despliegue de
        <strong>
            contenido
            estático
        </strong>
        y el de
        <strong>
            una aplicación web
            <span lang="en">
            Java
           </span>
        </strong>
        , la
        <strong>
            estructura de carpetas y recursos
        </strong>
        de una aplicación web y
        <strong>
            el descriptor del
            despliegue
        </strong>
        .
    </p>
    <p>
        Sus amigos
        <strong>
            Carlos
        </strong>
        y
        <strong>
            Ana
        </strong>
        , &nbsp;están muy
        interesados en comenzar a ayudarle a
        <strong>
            Juan,
        </strong>
        porque saben que van a aprender de forma
        práctica y van a poner en uso lo que están aprendiendo en sus estudios.
    </p>
</div><h1 class="title">
    2.1.- ¿Cómo evolucionan los servicios web?
</h1><div class="iDevice_content">
    <p>
        <strong>
        </strong>
        ha enviado un correo electrónico a
        <strong>
            Ana
        </strong>
        solicitándole
        <del datetime="2016-09-23T11:11:53">
        </del>
        ayuda para poder documentar la evolución de
        los servicios web en la
        <span lang="en">
           wiki
          </span>
        de su empresa.
    </p>
    <p>
        <strong>
            Ana
        </strong>
        ha accedido encantada a su petición, ya que está muy interesada
        en colaborar con la empresa en la que
        <strong>
            Juan
        </strong>
        trabaja, llegando incluso a pedirle a éste
        que le cree un usuario para poder acceder a la
        <span lang="en">
           wiki
          </span>
        interna de
        <strong>
            BK
            programación
        </strong>
        y ella misma documentar parte de los puntos que
        <strong>
            Juan
        </strong>
        tiene
        pensado redactar.
    </p>
</div><h1 class="title">
    2.2.- ¿Cuáles son las Tecnologías asociadas a las aplicaciones web?
</h1><div class="iDevice_content">

    <p>
        <strong>
        </strong>
        , debido a su afición por el diseño web, ha ofrecido a su
        amigo
        <strong>
            Juan
        </strong>
        realizar un estudio sobre las tecnologías que se emplean actualmente en
        esta materia. A
        <strong>
            Juan
        </strong>
        le ha parecido una idea magnífica, puesto que le va a servir
        para el desarrollo de su
        <span lang="en">
           wiki
          </span>
        .
    </p>
</div><h1 class="title">
    2.3.- Tipos de aplicaciones web.
</h1><div class="iDevice_content">
    <p>
    </p>

    <p>
        <br>
        Tras una gran labor de documentación acerca de las tecnologías de aplicaciones
        web,
        <strong>
            Carlos
        </strong>
        es consciente de que existe una gran diversidad de aplicaciones
        disponibles en la web. Por ello, ha decidido documentar un apartado denominado "
        <strong>
            Tipos de
            aplicaciones web
        </strong>
        " que puede ser de utilidad para la
        <span lang="en">
           wiki
          </span>
        que está
        creando su amigo
        <strong>
            Juan.
        </strong>
        <br/></p>
</div><h1 class="title">
    2.4.- Arquitecturas web. Modelos.
</h1><div class="iDevice_content">
    <p>
    </p>

    <p>
        En la
        <span lang="en">
           wiki
          </span>
        que
        <strong>
            Juan
        </strong>
        está desarrollando junto
        con sus amigos, ha decidido integrar un punto en el cual explicar los diversos tipos de modelos de
        arquitecturas web que se han utilizado a lo largo del tiempo. La finalidad es tener en cuenta las
        características de cada uno de ellos y, en función de las mismas, distinguir sus ventajas e
        inconvenientes.
    </p>
    <p>
    </p>
</div><h1 class="title">
    2.5.- Plataformas web libres y propietarias.
</h1><div class="iDevice_content">
    <p>
    </p>

    <p>
        <br>
        El diseño de aplicaciones web requiere de un entorno funcional, que permita el
        desarrollo de cada uno de los componentes que forman la aplicación web, junto con un entorno complejo
        de herramientas que ofrecen al cliente los servicios de las aplicaciones web; para todo ello, el
        mercado pone a disposición de los programadores un abanico de herramientas software, que
        <strong>
            Juan
        </strong>
        pretende analizar en la
        <span lang="en">
           wiki
          </span>
        de la empresa
        <strong>
            BK
            programación
        </strong>
        , estableciendo el criterio de clasificación que considera primordial:
        <strong>
            software libre o software propietario
        </strong>
        .
        <br/></p>
</div><h1 class="title">
    2.6.- Escalabilidad.
</h1><div class="iDevice_content">

    <p>
        Las aplicaciones web se ejecutan en un entorno donde el número de clientes que solicitan
        el servicio puede variar en gran medida en función del momento. Es por ello que hay una característica de
        esencial importancia como es la escalabilidad, al que
        <strong>
            Juan
        </strong>
        ha dedicado un apartado de su
        <span lang="en">
         wiki
        </span>
        para documentar esta característica.
    </p>
    <p>
        En el entorno en que se ubican las aplicaciones web, uno de los principales factores que
        puede afectar al rendimiento de las mismas es el número de usuarios, ya que éste puede verse incrementado
        de forma vertiginosa en un periodo de tiempo relativamente corto. El éxito o el fracaso de un sitio web
        orientado al usuario común vendrá determinado, entre otros aspectos, por el dimensionamiento del sistema
        sobre el que se instala y soporta el
        <span lang="en">
         software
        </span>
        que sustenta dicho sitio. En
        consecuencia, uno de los requisitos fundamentales de una aplicación web es que sea completamente escalable
        sin que un aumento de los recursos dedicados a la misma suponga modificación alguna en su comportamiento o
        capacidades.
    </p>
    <p>
        La escalabilidad de un sistema web puede ser:
    </p>
    <ul class="lista_verificacion">
        <li>
            <strong>
                Verticalmente:
            </strong>
            de manera ascendente "
            <span lang="en">
          upgrades
         </span>
            " a cada nodo.
        </li>
        <li>
            <strong>
                Horizontalmente:
            </strong>
            consiste en aumentar el número de nodos.
        </li>
        <li>
            <strong>
          <span lang="en">
           Cluster
          </span>
                :
            </strong>
            consiste en crear agrupaciones de servidores.
        </li>
    </ul>
    <p>
        <strong>
            Escalabilidad vertical.
        </strong>
    </p>
    <p style="margin-left: 30px;">
        Habitualmente, la separación lógica en capas se implementa de
        tal forma que se permita una separación física de las mismas. Interponiendo elementos conectores que
        actúen de
        <span lang="en">
         middlewares
        </span>
        es posible distribuir la aplicación de forma vertical (una
        máquina por cada capa del sistema), e incluso si esto no fuera suficiente, distribuyendo los elementos de
        una misma capa entre distintas máquinas servidoras.
    </p>
    <p>
        <strong>
            Escalabilidad horizontal.
        </strong>
    </p>

    <p style="margin-left: 30px;">
        <br>
        Se trata de clonar el sistema en otra máquina de
        características similares y balancear la carga de trabajo mediante un dispositivo externo. El balanceador
        de carga puede ser:
        <br/></p>
    <ul class="lista_verificacion">
        <li>
            <p>
                <strong>
                    Balanceador
                </strong>
                <strong>
           <span lang="en">
            Software
           </span>
                </strong>
                : por
                ejemplo, habitualmente encontramos un servidor web Apache junto con el módulo mod_jk, que permite la
                redirección de las peticiones http&nbsp;que a tal efecto sean configuradas entre las distintas
                máquinas que forman la granja de servidores. Este tipo de balanceadores examinan el paquete
                &nbsp;http&nbsp;&nbsp;e identifican la sesión del usuario, guardando registro de cuál de las máquinas
                de la granja se está encargando de servir a dicha sesión. Este aspecto es importante, dado que nos
                permite trabajar (de cara al diseño de la aplicación) apoyándonos en el objeto sesión propio del
                usuario y almacenando información relativa a la sesión del mismo, puesto que tenemos la garantía de
                que todas las peticiones de una misma sesión &nbsp;http&nbsp;&nbsp;van a ser redireccionadas hacia la
                misma máquina.
            </p>
        </li>
        <li>
            <p>
                <strong>
                    Balanceador
                </strong>
                <strong>
           <span lang="en">
            hardware
           </span>
                </strong>
                : se
                trata de dispositivos que, respondiendo únicamente a algoritmos de reparto de carga (
                <span lang="en">
           Round Robin
          </span>
                ,
                <abbr title="Least Recently Used ">
                    LRU
                </abbr>
                (Menos Usado Recientemente),
                <abbr title="etcétera.">
                    etc.
                </abbr>
                ),
                redireccionan una petición&nbsp;&nbsp;http&nbsp;&nbsp;del usuario a la máquina que, según dicho
                algoritmo, convenga que se haga cargo de la petición. Son mucho más rápidos que los anteriores, dado
                que se basan en conmutación de circuitos y no examinan ni interpretan el paquete&nbsp;&nbsp;http. Sin
                embargo, el no garantizar el mantenimiento de la misma sesión de usuario en la misma máquina,
                condiciona seriamente el diseño, dado que fuerza a que la información relativa a la sesión del usuario
                sea almacenada por el implementador del mismo, bien en
                <span lang="en">
           cookies
          </span>
                o bien en base
                de datos.
            </p>
        </li>
        <li>
            <p>
                <strong>
                    Balanceador
                </strong>
                <strong>
                    hardware
                </strong>
                <strong>
                    <abbr title="HyperText Transfer Protocol">
                        http
                    </abbr>
                </strong>
                : se trata de dispositivos
                <span lang="en">
           hardware
          </span>
                pero que examinan el paquete &nbsp;http&nbsp;&nbsp;y mantienen la
                relación usuario-máquina servidora. Mucho más rápidos que los balanceadores
                <span lang="en">
           software
          </span>
                , pero algo menos que los
                <span lang="en">
           hardware
          </span>
                , suponen hoy en
                día una de las soluciones más aceptadas en el mercado.
            </p>
        </li>
    </ul>
    <p>
        <strong>
         <span lang="en">
          Cluster.
         </span>
        </strong>
    </p>
    <p style="margin-left: 30px;">
        Con la aparición de los servidores de aplicaciones en
        <span lang="en">
         cluster
        </span>
        se abre una nueva capacidad de escalabilidad que, dependiendo de cómo se
        aplique, podría clasificarse como vertical u horizontal. Un
        <span lang="en">
         cluster
        </span>
        de servidores
        de aplicaciones permite el despliegue de una aplicación web corriente, de forma que su carga de trabajo
        vaya a ser distribuida entre la granja de servidores que forman el
        <span lang="en">
         cluster
        </span>
        , de modo
        transparente al usuario y al administrador. El
        <span lang="en">
         cluster
        </span>
        , mediante el mecanismo de
        replicación de sesión, garantiza que sea cual sea la máquina que sirva la petición &nbsp;http, tendrá
        acceso a la sesión del usuario (objeto HttpSession en Java). Este tipo de sistemas, debido precisamente a
        la replicación de sesión, suele presentar problemas de rendimiento.
    </p>
</div><h1 class="title">
    3.- Servidor web Apache.
</h1><div class="iDevice_content">
    <p>
        En la empresa
        <strong>
            BK programación
        </strong>
        ,
        <strong>
            Ada
        </strong>
        ha solicitado a
        <strong>
            María
        </strong>
        la instalación de un servidor web para albergar, entre otras cosas, la
        <span lang="en">
           wiki
          </span>
        que
        <strong>
            Juan,
        </strong>
        junto con sus amigos, están construyendo.
    </p>
    <p>
        <strong>
            María,
        </strong>
        por su parte, ha decidido instalar el
        <strong>
            servidor web
            Apache
        </strong>
        por ser uno de los más empleados.
    </p>
    <p>
        Le va a aportar también a
        <strong>
            Juan
        </strong>
        la información que pueda interesarle
        acerca de este servidor web para su
        <span lang="en">
           wiki
          </span>
        .
    </p>
    <p style="text-align: center;">
    </p>
</div><h1 class="title">
    3.1.- Características de Apache Http Server.
</h1><div class="iDevice_content">

    <ul class="lista_verificacion">
        <li>
            ¿Alguna vez te has parado a pensar qué existe detrás de una página web?
        </li>
        <li>
            ¿Por qué al escribir un nombre en un navegador puedes visionar una página web?
        </li>
        <li>
            ¿Por qué no tienes acceso a determinadas páginas?
        </li>
        <li>
            ¿De qué modo puedes impedir el acceso a determinados sitios de una página: por
            directorio, por usuario?
        </li>
        <li>
            ¿Cómo se puede establecer una comunicación segura en una transición bancaria?
        </li>
        <li>
            ...
        </li>
    </ul>
</div><h1 class="title">
    3.2.- Instalación en sistema basados en Linux.
</h1><div class="iDevice_content">
    <div class="elemento_derecha">
        <div class="elemento_centrado">
        </div>

    </div>
    <p>
    </p>
    <p>
        <strong>
            María
        </strong>
        debe instalar el
        <strong>
            servidor Apache
        </strong>
        debido a que
        es uno de los más empleados. Se trata de una herramienta de código libre y que funciona en multitud de
        plataformas; en este caso, será instalado en una máquina
        <span lang="en">
           con un sistema operativo
                    Linux basado en Debian
          </span>
        , quedando el servidor totalmente operativo.
    </p>
</div><h1 class="title">
    3.3.- Introducción a la configuración de Apache.
</h1><div class="iDevice_content">
    <p>
        Apache
        <strong>
            se configura colocando directivas en archivos de configuración
        </strong>
        de
        texto plano. El archivo principal de configuración se llama generalmente apache2.conf o
        <code>
            httpd.conf
        </code>
        (aunque esto puede cambiar dependiendo de la instalación realizada y del sistema).
        Y, ¿dónde encontramos dicho archivo? Dependiendo de la instalación variará su ubicación:
    </p>
    <ul>
        <li>
            En distribuciones de
            <span lang="en">
          Linux
         </span>
            tales como Ubuntu o Debian se le
            llama apache2.conf y se puede encontrar en la carpeta /etc/apache2/.
        </li>
        <li>
            En distribuciones de
            <span lang="en">
          Linux
         </span>
            tales como CentOS,
            <span lang="en">
          RedHat
         </span>
            o Fedora se le llama httpd.conf y suele estar en la carpeta /etc/httpd/conf/.
        </li>
        <li>
            En distribuciones tales como SUSE
            <span lang="en">
          Linux
         </span>
            se le
            llama&nbsp;httpd.conf y suele estar en la carpeta
            <span class="filename">
          /etc/apache2/.
         </span>
            <span class="filename">
         </span>
        </li>
    </ul>
    <p>
        Como puedes comprobar, dependiendo del caso, estará en un lugar u otro, y la cosa cambia
        todavía más si realizas una instalación en
        <span lang="en">
         Windows
        </span>
        u otros sistemas operativos.
    </p>
    <p>
        Desde el archivo de configuración principal se cargan otros archivos de configuración
        mediante la directiva Include e
        <code>
            IncludeOptional
        </code>
        . Esto permite separar la configuración de
        Apache en varios archivos, facilitando así su administración. En ambas directivas se pueden usar comodines
        para incluir muchos archivos de configuración simultáneamente. Si echamos un vistazo al
        archivo&nbsp;apache2.conf de una distribución como Ubuntu podremos ver lo siguiente:
    </p>
    <div class="codigo elemento_centrado" style="width: 49.45em;">
        <div class="texto_izquierda">
         <pre ngNonBindable>IncludeOptional mods-enabled/*.conf&lt;br&gt;Include ports.conf&lt;br&gt;IncludeOptional conf-enabled/*.conf&lt;br&gt;IncludeOptional sites-enabled/*.conf
&lt;/br&gt;&lt;/br&gt;&lt;/br&gt;</pre>
        </div>
    </div>
    <p>
    </p>
    <p>
        La diferencia fundamental entre la directiva Include e
        <code>
            IncludeOptional
        </code>
        es
        que Include producirá un error en la configuración si no existe ningún archivo que coincidan con el patrón
        indicado, mientras que&nbsp;IncludeOptional no.
    </p>
    <p>
        Pero, ¿qué es una directiva de configuración?
        <strong>
            Una directiva es básicamente una
            regla de funcionamiento que imponemos a Apache.
        </strong>
        Las directivas tienen dos partes, el
        <strong>
            nombre
        </strong>
        de la directiva (Include, por ejemplo) y unos
        <strong>
            parámetros
        </strong>
        (ports.conf, por ejemplo).
    </p>
    <p>
        A la hora de configurar Apache debemos tener en cuenta lo siguiente:
    </p>
    <ul>
        <li>
            Todas las directivas deben colocarse en alguno de esos archivos de configuración.
        </li>
        <li>
            <strong>
                Apache2 sólo reconocerá los cambios realizados en los archivos de
                configuración cuando se inicie o se reinicie.
            </strong>
        </li>
        <li>
            Solo podrá haber una directiva por línea, si una directiva ocupa más de una línea
            podemos acabar la línea en "\" y continuar en la siguiente línea.
            <strong>
            </strong>
        </li>
        <li>
            Las directivas se pueden escribir tanto en mayúsculas como en minúsculas, pero no así
            sus parámetros, en los que hay situaciones que si se distinguen mayúsculas de minúsculas.
        </li>
    </ul>
    <p>
        Cada directiva permite configurar un aspecto concreto de Apache y está asociada a un
        módulo concreto. Por ejemplo, si consultamos la documentación de Apache veremos que la
        directiva&nbsp;Include está asociada la módulo
        <strong>
            core
        </strong>
        , como podemos ver en la siguiente
        imagen, que corresponde a una captura de pantalla de la documentación oficial de Apache 2.4:
    </p>

    <p>
        En la imagen anterior se puede ver la sintaxis de la directiva, el módulo al que
        pertenece e incluso el contexto, que explicaremos a continuación.
        <strong>
            Lo importante de aquí es
            entender que si el módulo asociado a la directiva no está activo, dicha directiva no se podrá
            usar.
        </strong>
    </p>
    <p>
        Además de las directivas, en la configuración de Apache podremos tener secciones. Las secciones son
        contenedores que pueden incluir en su interior directivas que se aplican en un contexto concreto. Tienen
        un aspecto como el siguiente:
    </p>
    <div class="codigo elemento_centrado" style="width: 49.45em;">
        <div class="texto_izquierda">
            <pre ngNonBindable>&lt;strong&gt;&lt;/strong&gt;&lt;strong&gt;&lt;Directory /var/www/html/configuracion&gt;&lt;br /&gt;&nbsp;&nbsp; &nbsp;&lt;/strong&gt;Require all denied&lt;strong&gt;&lt;br /&gt;&lt;/Directory&gt;&lt;/strong&gt;</pre>
        </div>
    </div>
    <p>
        En este caso, la sección Directory permite aplicar directivas de forma específica sobre
        un directorio del servidor. Aquí el contexto es el directorio /var/www/html/configuracion/, y cuando se
        realice una petición web que requiera que el servidor web Apache acceda a dicho directorio, se denegará el
        acceso, tal y como se establece a través de la directiva required y los parámetros all denied. El
        resultado es que el servidor web Apache no servirá contenido de dicha carpeta, y devolverá un código de
        estado 403 al cliente web.
    </p>
    <p>
        Una sección puede contener en su interior más secciones, como el siguiente ejemplo:
    </p>
    <div class="codigo elemento_centrado" style="width: 49.45em;">
        <div class="texto_izquierda">
            <pre ngNonBindable>&lt;strong&gt;&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;&lt;strong&gt;&lt;Directory /var/www/&gt;&lt;br /&gt;&nbsp;&nbsp; &nbsp;&lt;Files "*.conf"&gt;&lt;br /&gt;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/strong&gt;&nbsp;Require all denied&lt;strong&gt;&lt;br /&gt;&nbsp;&nbsp; &nbsp;&lt;/Files&gt;&nbsp;&nbsp; &nbsp;&lt;br /&gt;&lt;/Directory&gt;&lt;/strong&gt;</pre>
        </div>
    </div>
    <p>
        En este caso, la sección Files está dentro de la sección Directory, y esto hace que la
        directiva&nbsp;Require all denied se aplique a aquellos archivos con extensión&nbsp;.conf que hay dentro
        de la carpeta&nbsp;/var/www (o en cualquier subcarpeta). El resultado es que se limitará el acceso solo a
        dichos archivos, tal y como se puede ver en la siguiente imagen:
    </p>

    <p>
        Por lo tanto, cuando vayamos a poner una directiva en la configuración (o una sección) tendremos que
        consultar la documentación para saber si la podemos poner dentro de una sección concreta o no. Para esto
        tendremos que mirar en que
        <strong>
            contexto
        </strong>
        se puede utilizar cada directiva o sección. Los
        contextos son los siguientes:
    </p>
    <ul>
        <li>
            <strong>
                server config
            </strong>
            : es lo que llamamos configuración global y nos indica que podemos poner
            la directiva fuera de cualquier sección, dado que se aplicará a todo el servidor web en su conjunto. Si
            en la directiva el único contexto posible es
            <strong>
                server config
            </strong>
            , la directiva solo se podrá
            poner a nivel global, y nunca dentro de una sección, ni en un archivo .htaccess.
        </li>
        <li>
            <strong>
                virtual host
            </strong>
            : hace referencia a las secciones &lt;VirtualHost&gt; que se verán más
            adelante.
        </li>
        <li>
            <strong>
                directory
            </strong>
            : hace referencia a las secciones &lt;Directory&gt;, &lt;Location&gt; y
            &lt;Files&gt; entre otras. Es decir, secciones relativas a archivos y directorios en el servidor, o
            relativas al recurso pedido en la petición
            <abbr title="HiperText Transfer Protocol">
                HTTP
            </abbr>
            (como es el caso de &lt;Location&gt;).
        </li>
        <li>
            <strong>
                .htaccess
            </strong>
            : las directivas válidas en este contexto podrán ser usadas dentro de los
            archivos .htaccess. Los archivos .htaccess son archivos de texto plano que, si están habilitados, se
            pueden crear en un directorio para establecer directivas específicas a ese directorio (y
            subdirectorios).
        </li>
    </ul>
</div><h1 class="title">
    3.4.- Iniciar y detener Apache.
</h1><div class="iDevice_content">
    <div class="elemento_derecha">
        <div class="elemento_centrado">
        </div>

    </div>
    <p>
    </p>
    <p>
        <strong>
            María
        </strong>
        debe instalar el servidor Apache debido a que es uno de los
        más empleados. También debe indicar todos y cada uno de los pasos para arrancar el servidor, así como
        las indicaciones oportunas para la accesibilidad a las páginas de la
        <span lang="en">
           wiki
          </span>
        desde
        el servidor Apache.
    </p>
    <p>
    </p>
    <p>
    </p>
</div><h1 class="title">
    4.- Configuración básica de Apache.
</h1><div class="iDevice_content">
    <p>
        <strong style="font-size: 1em;">
        </strong>
        <span style="font-size: 1em;">
           la Directora de
          </span>
        <strong style="font-size: 1em;">
            BK
            Programación
        </strong>
        <span style="font-size: 1em;">
           , se reúne con
           <strong>
            María
           </strong>
           y con
           <strong>
            Juan
           </strong>
           para tratar la mejor manera de implantar, configurar y mantener el nuevo
                    servidor para atender la aplicación web que le han encargado, para una empresa con varias
                    sucursales.
          </span>
    </p>
    <p>
          <span>
           —
          </span>
        Hola
        <strong>
            María
        </strong>
        <span>
           —
          </span>
        dijo
        <strong>
            Ada—,
        </strong>
        nos han ofrecido un nuevo proyecto relacionado con servicios web, pienso que
        podemos afrontarlo, pero quería saber tu opinión. ¿Con la infraestructura que tenemos ahora ves
        necesario el montaje de otro equipo servidor dedicado a este proyecto o con lo que tenemos nos
        arreglamos?
    </p>
    <p>
          <span>
           —
          </span>
        Pienso &nbsp;que tal como estamos ahora, sí o sí&nbsp;—dijo María—,
        &nbsp;independientemente de los recursos que consuma este nuevo proyecto necesitamos la configuración
        de otro equipo servidor. Además debemos configurar dos entornos: el de pruebas y el de producción.
        ¿Para cuándo sería el proyecto?
    </p>
    <p>
        —El proyecto debemos entregarlo con fecha final dentro de tres meses.
    </p>
    <p>
        —Entonces, creo que si todo sigue su cauce normal no tendremos ningún tipo de
        problema para la ejecución del proyecto. ¿Qué recursos humanos habías pensado destinar al proyecto?
    </p>
    <p>
        —Ahora disponemos de todo el personal de la empresa y cuento contigo y con
        <strong>
            Juan
        </strong>
        para que os coordinéis las funciones de este proyecto.
    </p>
    <p>
        —Pues por mí, no veo objeción al mismo.
    </p>
    <p>
        —Bien —asintió
        <strong>
            Ada—,
        </strong>
        entonces no se hable más, tendremos que
        configurar otro equipo servidor y aceptamos el proyecto.
    </p>
    <p>
    </p>
    <p>
        Para afrontar el nuevo proyecto al que se enfrentan en la reunión se determinó que
        <strong>
            María
        </strong>
        sería la encargada del montaje, configuración y administración del nuevo equipo
        servidor y
        <strong>
            Juan
        </strong>
        el encargado de coordinar con el resto del personal la creación y
        funcionamiento de las aplicaciones web del proyecto.
    </p>
    <p>
        <strong>
            María,
        </strong>
        entonces, se puso manos a la obra y determinó el siguiente
        escenario de trabajo para el equipo servidor de este proyecto:
    </p>
    <ul class="lista_verificacion">
        <li>
            Sistema Operativo:
            <strong>
            <span lang="en">
             Debian
            </span>
                <abbr title="GNU is Not Unix">
                    GNU
                </abbr>
                /
                <span lang="en">
             Linux
            </span>
                6.0
            </strong>
        </li>
        <li>
            Servidor Web:
            <strong>
                Apache (apache2)
            </strong>
            <ul class="lista_verificacion">
                <li>
                    Configuración de Red:
                </li>
                <li>
                    Servidor Web:
                    <strong>
                        192.168.200.250
                    </strong>
                </li>
                <li>
                    Cliente de pruebas (desde donde se lanza el navegador):
                    <strong>
                        192.168.200.100
                    </strong>
                </li>
            </ul>
        </li>
    </ul>
</div><h1 class="title">
    4.1.- Servicio de ficheros estáticos.
</h1><div class="iDevice_content">
    <p>
        ¿Es necesario que todas las páginas web se modifiquen constantemente?
    </p>
    <p>
        ¿Un
        <span lang="en">
           blog
          </span>
        sería útil si el contenido no sufre cambios?
    </p>
    <p>
        ¿Y un manual? ¿Si actualizamos un manual la página deja de ser estática?
    </p>
</div><h1 class="title">
    4.2.- Directivas y secciones de configuración.
</h1><div class="iDevice_content">
    <p>
        Ya hemos hablado de los contextos en los cuales podemos encontrar directivas y de algunas directivas, y
        hemos tratado superficialmente las secciones que hay asociadas a cada contexto. Ahora es el momento de
        ahondar en las secciones más importantes.
    </p>
    <p>
        Algunas de estas secciones ya las hemos tratado superficialmente, como la sección Directory, que permite
        aplicar un conjunto de directivas de forma específica a un directorio y sus subdirectorios de nuestro
        servidor. O la sección&nbsp;Files que permite aplicar un conjunto de directivas de forma específica a un
        conjunto de archivos.
    </p>
    <p>
        Es importante saber que la directiva Directory, y otras directivas, pueden contener caracteres comodín y
        expresiones regulares.&nbsp;Las expresiones regulares son expresiones que permiten expresar un patrón de
        búsqueda, si el directorio al que se está accediendo tras la petición web encaja con el patrón de búsqueda
        entonces se aplicarán las restricciones. Veamos un ejemplo:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;Directory /var/www/html/te*/&gt;
   Options +Indexes
   AllowOverride AuthConfig
&lt;/Directory&gt;</pre>
        </div>
    </div>
    <p>
        El carácter comodín en el ejemplo anterior es el asterísco (*) el cual significa literalmente "una
        secuencia de cero o más símbolos alfanuméricos". En dicho ejemplo, la sección&nbsp;Directory anterior se
        aplicaría a un directorio como /var/www/html/test, y a otros tales como&nbsp;/var/www/html/te o
        <code>
            /var/www/html/tesoro
        </code>
        , pero no al directorio /var/www/html/mitest. Otro carácter comodín es el
        interrogante (?), que significaría por un único símbolo alfanumérico.
    </p>
    <p>
        En el ejemplo anterior se han aplicado además dos directivas bastante comunes a la sección Directory: la
        directiva Options que se puede aplicar en varias secciones y que permite habilitar o deshabilitar
        características concretas para una sección; y la directiva AllowOverride, que solo se puede usar dentro de
        un Directory, y que permite indicar si se pueden sobrescribir algunas directivas a través de archivos
        .htaccess.
    </p>
    <p>
        Vamos a detenernos un momento a analizar ese ejemplo de uso de la directiva Options. Al
        escribir&nbsp;Options +Indexes estamos diciendo a Apache que, si en la
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        no se especifica el recurso a servir (por
        ejemplo, se pone&nbsp;http://localhost/test/ en vez de http://localhost/test/imagen1.jpg), y en dicha
        carpeta no encuentra un archivo&nbsp;DirectoryIndex (
        <code>
            index.html
        </code>
        por ejemplo), se generará un
        listado del contenido de la carpeta similar al siguiente:
    </p>

    <p>
        Si por el contrario, la directiva fuera&nbsp;Options -Indexes el resultado sería el contrario,
        deshabilitaríamos esa característica y obtendríamos el siguiente resultado:
    </p>

    <p>
        Existen varias características asociadas a la directiva Options y lo mejor es consultar la documentación
        para conocerlas, dado que aquí es imposible tratarlas todas. La otra directiva indicada antes,
        AllowOverride permite escribir directivas en archivos .htaccess. Los archivos .htaccess son archivos que
        se colocan directamente el directorio en el que queremos aplicar dichas directivas, por ejemplo, si
        queremos aplicar directivas específicas al directorio /home/www/html/tesoro/privado, podríamos hacer lo
        siguiente:
    </p>
    <ul class="lista_verificacion">
        <li>
            En un archivo de configuración principal (/etc/apache2/apache2.conf por ejemplo), pondríamos
            AllowOverride dentro de una sección Directory. Recuerda que la sección Directory aplica las directivas
            al directorio indicado y a los subdirectorios que haya dentro, por lo que el ejemplo anterior:
            &lt;Directory /home/www/html/te*&gt;; nos serviría.
        </li>
        <li>
            Crearíamos el archivo .htaccess en el directorio en cuestión (/home/www/html/tesoro/privado en este
            caso), y dentro escribiríamos las directivas a aplicar, por ejemplo:
        </li>
    </ul>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>#Archivo .htaccess en /home/www/html/tesoro/privado
Require all denied</pre>
        </div>
    </div>
    <p>
        Con el ejemplo anterior estaríamos limitando el acceso a la carpeta /home/www/html/tesoro/privado. La
        ventaja de los archivos .htaccess, es que podemos escribir directivas en ellos y no es necesario reiniciar
        Apache para que las directivas se apliquen. El inconveniente es que en dichos archivos solo se pueden usar
        aquellas directivas aplicables en el contexto .htaccess.
    </p>
    <p>
        El conjunto de directivas que podemos poner en un archivo .htaccess va limitado por la directiva
        AllowOverride. Veamos diferentes ejemplos:
    </p>
    <ul class="lista_verificacion">
        <li>
            AllowOverride All: Todas las directivas aplicables dentro del contexto .htaccess.
        </li>
        <li>
            AllowOverride AuthConfig: Solo directivas de tipo autenticación y control de acceso, como AuthUserFile
            o
            <code>
                Require
            </code>
            .
        </li>
        <li>
            AllowOverride AuthConfig Indexes: Se pueden usar directivas de tipo de autenticación y relativas a la
            indexación de documentos (por ejemplo, para cambiar el DocumentIndex de una carpeta concreta).
        </li>
    </ul>
    <p>
        El conjunto de variantes completo de AllowOverride es mejor que lo consultes en la documentación.
    </p>
    <p>
        Otra sección de relevancia es la sección Location que permite aplicar directivas en función de la
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        de la petición. Imagina que en un
        servidor web que tienes configurado estás sirviendo contenido a través de la
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        http://www.midominio.local/contenido (es decir,
        un navegador puede acceder al contenido de tu web a través de esa
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        anterior), pero quieres limitar el acceso
        cuando la
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        sea
        http://www.midominio.local/contenido/protegido. En ese caso podrías poner directivas que se aplicaran solo
        cuando una
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        tenga una forma específica:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;Location "/*/protegido"&gt;
    Require all denied
&lt;/Location&gt;</pre>
        </div>
    </div>
    <p>
        En este caso, cuando el recurso solicitado en la petición
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        siga el patrón anterior (recuerda que * es un carácter comodín), se denegará el
        acceso. Aunque la sección Location tiene muchas ventajas (por ejemplo, se aplica aunque se cambie el
        DocumentRoot) normalmente se prefiere el uso de la directiva Directory.
    </p>
    <p>
        Paralelamente a las secciones Directory y
        <code>
            Location
        </code>
        existen las secciones DirectoryMatch y
        <code>
            LocationMatch
        </code>
        , que permiten poner una expresión regular en vez de un directorio o un camino
        al recurso, y que son mucho más flexibles que los caracteres comodín.
    </p>
    <p>
        Es normal encontrar las secciones Directory y
        <code>
            Location
        </code>
        (y sus compañeros que usan
        expresiones regulares), dentro de la configuración global, pero también es muy normal encontrarlas dentro
        lo que llamamos un VirtualHost o
        host
        virtual
        .
    </p>
    <p>
        Apache permiten servir diferente contenido en función del nombre de dominio, del puerto, o simplemente de
        la dirección
        <abbr title="Internet Protocol">
            IP
        </abbr>
        . Por ejemplo, un mismo servidor web
        puede servir contenido diferente para http://localhost/miweb, para http://www.midominio.local/miweb, y
        para otros casos que se nos ocurra configurar; y esto se logra gracias a los VirtualHost.
    </p>
    <p>
        Cuando las secciones Directory y
        <code>
            Location
        </code>
        se configuran dentro de un host virtual, solo se
        aplican en el contexto de ese host virtual, y no a nivel global. Por ejemplo:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;VirtualHost *:80&gt;

	ServerName www.midominio.local
	ServerAdmin webmaster&#64;midominio.local
	DocumentRoot /var/www/midominiolocal

	&lt;strong&gt;&lt;Directory /var/www/&lt;code&gt;midominiolocal/protegido&gt;
		Require all denied


	ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log
	CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined

</pre>
        </div>
    </div>
    <p>
        En este VirtualHost se especifica el contenido a servir cuando se accede al servidor web Apache
        solicitando el dominio www.midominio.local. En el ejemplo anterior la directiva Directory solo se aplica
        en el contexto del VirtualHost. Los hosts virtuales se ven con mayor detalle un poco más adelante.
    </p>
    <div class="exe-tooltip-text" id="t25eed0d8-236d-4d27-be33-c313af67db69">
        <p>
            Dominios independientes que se pueden alojar en un mismo servidor web.
        </p>
    </div>
</div><h1 class="title">
    4.3.- Directivas de configuración básicas.
</h1><div class="iDevice_content">
</div><h1 class="title">
    4.4.- Contenido dinámico.
</h1><div class="iDevice_content">
    <blockquote class="exe-quote-cite styled-qc">
        <p>
            El progreso consiste en el cambio.
        </p>
        <cite>
            Miguel de Unamuno
        </cite>
    </blockquote>
</div><h1 class="title">
    5.- Hosts virtuales. Creación, configuración y utilización.
</h1><div class="iDevice_content">
    <p style="text-align: center;">
        <strong>
        </strong>
    </p>
    <p>
          <span style="font-size: 1em;">
           A la empresa
           <strong>
            BK Programación
           </strong>
           le ha surgido el
                    siguiente proyecto: una empresa con varias sucursales quiere montar una aplicación web por sucursal.
                    La empresa en cuestión consta de 7 sucursales. Todas ellas dedicadas a la misma línea de negocio.
                    Así, las aplicaciones tendrán un frontal similar, pero estarán personalizadas dependiendo de la
                    situación de la sucursal, de tal forma que los
          </span>
        <span lang="en" style="font-size: 1em;">
           banners
          </span>
        <span style="font-size: 1em;">
           , logos e imágenes de cada
                    aplicación serán monumentos locales a la zona de la sucursal.
          </span>
    </p>
    <p>
        El equipo de trabajo del proyecto está coordinado por
        <strong>
            María,
        </strong>
        ella es la encargada
        del montaje, creación y configuración del servidor web donde irán alojadas las aplicaciones web.
    </p>
    <p>
        La empresa quiere que las sucursales puedan ser localizadas en Internet mediante
        <abbr title="Uniform Resource Locator.">
            URL
        </abbr>
        tipo:&nbsp;www.sucursal-zonaX.empresa-proyecto.com, donde X puede variar de 1 a 7.
    </p>
    <p>
        Además quiere que si las páginas se buscan sin www.&nbsp;éstas sigan viéndose, es decir, que
        sucursal-zonaX.empresa-proyecto.com se dirija a la misma página que
        www.sucursal-zonaX.empresa-proyecto.com
    </p>
    <p>
        La empresa también desea que exista
        <strong>
            un único panel de control de usuarios
        </strong>
        , en la
        <abbr title="Uniform Resource Locator.">
            URL
        </abbr>
        www.empresa-proyecto.panel-de-control.com, de tal forma que según el perfil que posea la persona
        usuaria, podrá ver un contenido u otro. Así, desea que los comerciales tengan la posibilidad de saber
        qué productos y cantidades de los mismos existen en
        <span lang="en">
           stock
          </span>
        . Al panel de control
        se accede a través de un enlace configurado en cada aplicación.
    </p>
    <p>
        <strong>
            María
        </strong>
        se reúne con
        <strong>
            Juan,
        </strong>
        el encargado del desarrollo de las
        aplicaciones web, y con Carlos, que ejerce el rol del usuario destinado a comprobar el buen
        funcionamiento de las aplicaciones haciendo pruebas con distintos navegadores:
    </p>
    <p>
        —Pienso —dijo
        <strong>
            María—
        </strong>
        que la mejor forma de llevar a buen puerto el proyecto se
        realiza configurando
        <strong>
           <span lang="en">
            hosts
           </span>
        </strong>
        virtuales en el servidor web Apache
        y no solamente colgando las aplicaciones web en un directorio raíz común para luego, cada una,
        disponer de su espacio en una carpeta independiente.
    </p>
    <p>
        —Sí, —dijo
        <strong>
            Juan—,
        </strong>
        además tenemos que tener en cuenta la seguridad del panel de
        control, deberíamos pensar en el protocolo
        <abbr title="Hypertext Transfer Protocol Secure">
            HTTPS
        </abbr>
        , para asegurarnos que la información vaya cifrada.
    </p>
    <p>
        —Estoy de acuerdo —afirmó
        <strong>
            María—.
        </strong>
        Entonces,
        <strong>
            Carlos,
        </strong>
        deberás hacer
        las pruebas mediante
        <abbr title="HyperText Transfer Protocol">
            HTTP
        </abbr>
        y
        <abbr title="Hypertext Transfer Protocol Secure">
            HTTPS
        </abbr>
        .
    </p>
    <p>
        —Vale, de acuerdo —dijo
        <strong>
            Carlos—.
        </strong>
    </p>
</div><h1 class="title">
    5.1.- Virtualhosts basados en nombre.
</h1><div class="iDevice_content">

    <p>
        Configurar
        <span lang="en">
         hosts
        </span>
        virtuales basados en nombre es generalmente más
        sencillo que otras configuraciones. La idea es hacer que varios nombres de máquinas (www.miejemplo.local y
        <code>
            www.midominio.local
        </code>
        , por ejemplo) apunten a la misma dirección
        <abbr title="Internet Protocol">
            IP
        </abbr>
        .
    </p>
    <p>
        El servidor web determinará que sitio web se debe servir en base a la petición web del
        cliente, concretamente a partir de una cabecera Host que se incluirá en la petición
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        :
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>root&#64;test-VirtualBox:/etc/apache2# telnet localhost 80
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
GET / HTTP/1.1
&lt;strong&gt;Host:www.miejemplo.local&lt;/strong&gt;</pre>
        </div>
    </div>
    <p>
        Para conseguir esto, en la declaración del&nbsp;VirtualHost deberíamos poner la
        <abbr title="Internet Protocol">
            IP
        </abbr>
        que tiene asignado nuestro servidor. Supongamos que
        nuestro servidor web tiene la dirección
        <abbr title="Internet Protocol">
            IP
        </abbr>
        192.168.200.250 asignada. ¿Cómo lo haces? Podríamos pone la siguiente
        configuración:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;VirtualHost&lt;strong&gt; 192.168.200.250:80&lt;/strong&gt;&gt;
  DocumentRoot /var/www/empresa1/
  ServerName www.empresa1.com
  ServerAlias empresa1.com empresa1.es www.empresa1.es
&lt;/VirtualHost&gt;
</pre>
        </div>
    </div>
    <p style="text-align: left;">
        La directiva&nbsp;ServerAlias sirve para indicar nombres de
        máquina alternativos, de tal manera que el&nbsp;VirtualHost anterior serviría el mismo contenido cuando se
        accede con uno de sus nombres altenativos. Si ahora queremos que nuestro servidor web sirva contenido de
        otro sitio web, usando la misma dirección
        <abbr title="Internet Protocol">
            IP
        </abbr>
        ,
        podemos agregar otro&nbsp;VirtualHost con otro ServerName:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;VirtualHost &lt;code&gt;&lt;strong&gt;192.168.200.250:80&lt;/strong&gt;&gt;
  DocumentRoot /var/www/empresa2/
  ServerName www.empresa2.com
  ServerAlias empresa2.com empresa2.es www.empresa2.es

</pre>
        </div>
    </div>
    <p style="text-align: left;">
        A la hora de configurar un
        &lt;strong&gt;VirtualHost&lt;/strong&gt; es común el uso de caracteres comodín, concretamente el&nbsp;*
        para indicar que dicho host virtual se aplica a cualquier dirección
        <abbr title="Internet Protocol">
            IP
        </abbr>
        que tenga asignada el servidor:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;VirtualHost &lt;strong&gt;*:80&lt;/strong&gt;&gt;
  DocumentRoot /var/www/empresa1/
  ServerName www.empresa1.com
  ServerAlias empresa1.com empresa1.es www.empresa1.es
&lt;/VirtualHost&gt;&lt;br /&gt;&lt;br /&gt;</pre>
            <pre ngNonBindable>&lt;VirtualHost &lt;code&gt;&lt;strong&gt;*:80&lt;/strong&gt;&gt;
  DocumentRoot /var/www/empresa2/
  ServerName www.empresa2.com
  ServerAlias empresa2.com empresa2.es www.empresa2.es
</pre>
        </div>
    </div>
    <p style="text-align: left;">
        Recuerda que en sistemas operativos como Ubuntu o Debian es común
        crear los
        <span lang="en">
         hosts
        </span>
        virtuales en la carpeta /etc/apache2/sites-available, y no
        directamente en el archivo de configuración principal (apache2.conf o
        <code>
            httpd.conf
        </code>
        ), para
        después crear enlaces simbólicos a la carpeta /etc/apache2/sites-enabled de aquellos
        <span lang="en">
         host
        </span>
        virtuales que queramos activar.
    </p>
    <p style="text-align: left;">
        Revisemos ahora la configuración anterior directiva a directiva:
    </p>
    <ul class="lista_verificacion">
        <li>
            &lt;VirtualHost IP_Servidor_Web:80&gt;: &nbsp;en el inicio, la etiqueta
            <span lang="en">
          VirtualHost
         </span>
            define la
            <abbr title="Internet Protocol">
                IP
            </abbr>
            del
            servidor web (recuerda que en un mismo servidor podemos tener asignadas varias direcciones
            <abbr title="Internet Protocol">
                IP
            </abbr>
            ). También se indica el puerto
            <abbr title="Transmission Control Protocol">
                TCP
            </abbr>
            para el protocolo
            <abbr title="HyperText Transfer Protocol">
                HTTP
            </abbr>
            , que por defecto es el
            <strong>
                80
            </strong>
            . Recuerda que podemos configurar que puertos escucha nuestro servidor web Apache
            mediante la directiva Listen. Recuerda también que se pueden usar varias directivas Listen para
            especificar varias direcciones y puertos de escucha. El servidor web Apache responderá a peticiones en
            cualquiera de esas direcciones y puertos. Por ejemplo, para hacer que el servidor acepte conexiones en
            los puertos 80 y 8080, usa:
            <div class="codigo elemento_centrado" style="width: 12.6em;">
                <div class="texto_izquierda">
           <pre ngNonBindable>Listen 80
</pre>
                    <pre ngNonBindable>Listen 8080
</pre>
                </div>
            </div>
            <p style="margin-left: 60px;">
                Para hacer que el servidor acepte conexiones en dos
                direcciones
                <abbr title="Internet Protocol">
                    IP
                </abbr>
                y puertos diferentes,usa:
            </p>
            <div class="codigo elemento_centrado" style="width: 21.4em;">
                <div class="texto_izquierda">
           <pre ngNonBindable>Listen 192.168.200.250:80
</pre>
                    <pre ngNonBindable>Listen 192.168.200.253:8080
</pre>
                </div>
            </div>
        </li>
        <li>
            DocumentRoot /var/www/empresa1/: definición de la ruta donde está alojada la página web en el
            servidor, en este caso: /var/www/empresa1/ mediante la directiva DocumentRoot.
        </li>
        <li>
            ServerName www.empresa1.com: declaración del nombre
            <abbr title="Domain Name System">
                DNS
            </abbr>
            para el que se servirán las páginas alojada en la ruta declarada mediante la
            directiva DocumentRoot. Es el nombre que escribes en el navegador para visitar la página.
        </li>
        <li>
            ServerAlias empresa1.com: la directiva ServerAlias permite definir otros nombres
            <abbr title="Domain Name System">
                DNS
            </abbr>
            para la misma página.
        </li>
        <li>
            &lt;/VirtualHost&gt;: fin de la sección VirtualHost
            <code>
            </code>
            .
        </li>
    </ul>
</div><h1 class="title">
    5.2.- Virtualhosts basados en IP.
</h1><div class="iDevice_content">

    <p>
        En un servidor, y en cualquier ordenador realmente, podemos tener varias interfaces de
        red (tarjetas
        Ethernet
        por ejemplo), cada una con una dirección
        <abbr title="Internet Protocol">
            IP
        </abbr>
        independiente. Incluso podemos tener una misma tarjeta de red con múltiples direcciones
        <abbr title="Internet Protocol">
            IP
        </abbr>
        .
    </p>
    <p>
        Partiendo de la idea anterior, podemos decir que los
        <span lang="en">
         hosts
        </span>
        virtuales&nbsp;basados en
        <abbr title="Internet Protocol">
            IP
        </abbr>
        se utilizan para
        servir diferentes contenidos en función de la dirección
        <abbr title="Internet Protocol">
            IP
        </abbr>
        a través de la cual se recibe la petición
        <abbr title="HiperText Transfer Protocol">
            HTTP
        </abbr>
        .
    </p>
    <p>
        A pesar de lo que pueda pensarse, este tipo de configuración es menos común que los
        <span lang="en">
         host
        </span>
        virtuales&nbsp;basados en nombre, porque implica que un mismo servidor tenga
        varias direcciones
        <abbr title="Internet Protocol">
            IP
        </abbr>
        , e incluso varias
        tarjetas de red, y cuando hablamos de direcciones
        <abbr title="Internet Protocol">
            IP
        </abbr>
        públicas eso puede conllevar un sobrecoste si el número de nombres de dominio es
        muy elevado. Además, puede ser más difícil de mantener si las
        <abbr title="Internet Protocol">
            IP
        </abbr>
        del servidor web se modifican con cierta frecuencia.
    </p>
    <p>
        Partiendo de esa idea, imagina que tienes un servidor con dos interfaces de red, cada una
        con las siguientes direcciones
        <abbr title="Internet Protocol">
            IP
        </abbr>
        :
        192.168.200.251 y
        <code>
        </code>
        192.168.200.252. Dada esta configuración, podríamos poner una
        <abbr title="Internet Protocol">
            IP
        </abbr>
        diferente para cada Virtualhost, de manera que se
        sirviera un sitio web específico a través de una de las direcciones
        <abbr title="Internet Protocol">
            IP
        </abbr>
        y otro sitio web diferente a través de la otra.
    </p>
    <p>
        ¿Cómo lo haces? Sigues el mismo procedimiento usado para los
        <span lang="en">
         <span lang="en">
          VirtualHost
         </span>
        </span>
        basados en nombre, pero especificando una dirección
        <abbr title="Internet Protocol">
            IP
        </abbr>
        diferente para cada VirtualHost, veamos:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;VirtualHost &lt;strong&gt;192.168.200.251&lt;/strong&gt;:80&gt;
  DocumentRoot /var/www/empresa3/
  ServerName www.empresa3.com
  ServerAlias empresa3.com
&lt;/VirtualHost&gt;
</pre>
        </div>
    </div>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;VirtualHost &lt;strong&gt;192.168.200.252&lt;/strong&gt;:80&gt;
  DocumentRoot /var/www/empresa4/
  ServerName www.empresa4.com
  ServerAlias empresa4.com
&lt;/VirtualHost&gt;
</pre>
        </div>
    </div>
    <p>
        Recuerda que dependiendo del sistema operativo y del tipo de instalación realizada la
        configuración de los
        <span lang="en">
         host
        </span>
        virtuales conviene hacerla en un sitio u otro. En Ubuntu
        y Debian es mejor crear archivos de configuración independientes en la carpeta
        /etc/apache2/sites-available, dado que es una carpeta pensada para definir
        <span lang="en">
         hosts
        </span>
        virtuales, y después activarlos con el comando&nbsp;a2ensite.
        <code>
        </code>
    </p>
    <p>
        Veamos ahora con un poco más de detalle las secciones y directivas anteriores:
    </p>
    <ul class="lista_verificacion">
        <li>
            &lt;VirtualHost 192.168.200.251:80&gt;: &nbsp;en el inicio la etiqueta Virtualhost&nbsp;define
            la
            <abbr title="Internet Protocol">
                IP
            </abbr>
            1 del servidor web donde se aloja la
            página de la empresa, en este caso empresa3. El puerto
            <abbr title="Transmission Control Protocol">
                TCP
            </abbr>
            por defecto es el
            <strong>
                80
            </strong>
            , definido en la configuración principal
            del servidor, mediante la directiva Listen.
        </li>
        <li>
            DocumentRoot /var/www/empresa3/: definición de la ruta donde está alojada la página web en el
            servidor, en este caso: /var/www/empresa3/&nbsp;mediante la directiva DocumentRoot.
        </li>
        <li>
            ServerName www.empresa3.com: declaración del nombre
            <abbr title="Domain Name System">
                DNS
            </abbr>
            para el que se servirán las páginas alojada en la ruta declarada mediante la
            directiva DocumentRoot. Es el nombre que escribes en el navegador para visitar la página.definición del
            nombre
            <abbr title="Domain Name System">
                DNS
            </abbr>
            que buscará la página alojada en la
            ruta anterior del servidor mediante la directiva ServerName. Es el nombre que escribes en el navegador
            para visitar la página.
        </li>
        <li>
            ServerAlias empresa3.com: la directiva ServerAlias permite definir otros nombres
            <abbr title="Domain Name System">
                DNS
            </abbr>
            para la misma página.
        </li>
        <li>
            &lt;/VirtualHost&gt;: fin de la etiqueta VirtualHost
            <code>
            </code>
            .
        </li>
    </ul>
    <div class="exe-tooltip-text" id="tba6e1b5f-d51c-ce34-ad3f-383d0b5f85a7">
        <p>
            Un tipo de tarjeta de expansión que se le pone a los ordenadores y servidores para permitir
            conectividad a través de la red. A este tipo de conexiones también se las conoce como NIC (del inglés
            "
            <span lang="en">
          Network Interface Card
         </span>
            ").
            <span lang="en">
          Ethernet
         </span>
            en sí es una
            tecnología para conectar ordenadores a través de cable.
        </p>
    </div>
</div><h1 class="title">
    5.3.- Configuraciones mixtas.
</h1><div class="iDevice_content">
    <blockquote class="exe-quote-cite styled-qc">
        <p>
            Cuando me preguntan cuándo estará listo un programa, contesto: depende de cuánto trabaje usted en
            ello.
        </p>
        <cite lang="en">
            Richard Stallman
        </cite>
    </blockquote>
</div><h1 class="title">
    6.- Módulos.
</h1><div class="iDevice_content">
    <p>
          <span style="font-size: 1em;">
           </span>
        <span style="font-size: 1em;">
           —
          </span>
        <span style="font-size: 1em;">
           pensó
          </span>
        <strong style="font-size: 1em;">
            María
        </strong>
        —
        <strong style="font-size: 1em;">
            .
        </strong>
        <span style="font-size: 1em;">
           Manos a la obra. Debo
           <strong>
            montar un nuevo servidor web Apache
           </strong>
           y necesito... veamos:
          </span>
    </p>
    <ul class="lista_verificacion">
        <li>
            Que
            <strong>
                varias aplicaciones web atiendan en el mismo dominio
            </strong>
            , tal que:
            <ul>
                <li>
                    sucursal-zonaX.empresa-proyecto.com,
                </li>
                <li>
                    www.sucursal-zonaX.empresa-proyecto.com,
                </li>
            </ul>
        </li>
        <li>
            Un
            <strong>
                único panel de control de usuarios
            </strong>
            , en la
            <abbr title="Uniform Resource Locator.">
                URL
            </abbr>
            :
            <ul>
                <li>
                    www.empresa-proyecto.panel-de-control.com,
                </li>
            </ul>
        </li>
        <li>
            También
            <strong>
                soporte
                <abbr title="Secure Sockets Layer">
                    SSL
                </abbr>
                para
                cifrado
            </strong>
            .
        </li>
        <li>
            <strong>
                Soporte para páginas dinámicas
            </strong>
            mediante
            <abbr title="PHP Pre Hypertext -processor">
                PHP
            </abbr>
            .
        </li>
        <li>
            Y
            <strong>
                soporte para control de usuarios
            </strong>
            <abbr title="Lightweight Directory Access Protocol">
                LDAP
            </abbr>
            .
        </li>
    </ul>
    <p>
        Uhm..., ya lo tengo claro. Tengo que
        <strong>
            montar Apache con varios
            módulos
        </strong>
        , así primero instalaré Apache, luego verificaré que módulos vienen instalados por
        defecto, si me conviene dejarlos instalados o no, igual tengo que desinstalar alguno y tendré que
        investigar cuáles son los módulos nuevos a instalar.
    </p>
    <p>
        Muy bien, pues lo dicho, ¡manos a la obra!
    </p>
</div><h1 class="title">
    6.1.- Operaciones sobre módulos.
</h1><div class="iDevice_content">
    <blockquote class="exe-quote-cite styled-qc">
        <p>
            Me lo contaron y lo olvidé. Lo vi y lo entendí. Lo hice y lo aprendí.
        </p>
        <cite>
            Confucio
        </cite>
    </blockquote>
</div><h1 class="title">
    7.- Tipos MIME.
</h1><div class="iDevice_content">
    <p>
        ¿Cómo se transmite un vídeo por Internet, con qué codificación?
    </p>
    <p>
        ¿Cómo sabe un navegador al seguir un enlace de vídeo, el programa que debe utilizar
        para reproducirlo?
    </p>
</div><h1 class="title">
    7.1.- Configurar el servidor para enviar los tipos MIME correctos.
</h1><div class="iDevice_content">

    <p>
        <span style="font-size: 1em;">
         En el servidor web Apache podemos especificar el tipo
         <abbr title="Multipurpose Internet Mail Extensions">
          MIME
         </abbr>
         para aquellos archivos que el
                servidor no pueda identificar automáticamente como pertenecientes a un tipo concreto, esto es, para
                aquellos que no se resuelven según su extensión.
        </span>
    </p>
    <p>
        Pero, ¿cómo consigue Apache identificar automáticamente el tipo
        <span style="font-size: 1em;">
         <abbr title="Multipurpose Internet Mail Extensions">
          MIME
         </abbr>
        </span>
        de un archivo? Pues a partir de su extensión. Si el archivo tiene como extensión jpg, el tipo usado
        por Apache será image/jpeg.&nbsp;Esto se logra gracias al módulo de Apache mod_mime.Ten en cuenta que esto
        es válido para contenido estático, dado que en una aplicación web (hecha con
        <abbr title="HiperText Preprocessor">
            PHP
        </abbr>
        por ejemplo), se puede cambiar la cabecera
        Content-Type según las necesidades.
    </p>
    <p>
        En el caso de una instalación de Apache desde repositorio en Debian y Ubuntu, el
        módulo&nbsp;mod_mime suele estar activo por defecto. El archivo
        /etc/apache2/mods-available/mime.conf
        <strong>
        </strong>
        está destinado a configurar este módulo, y el
        archivo
        /etc/mime.types
        <span class="tamano">
         (zip - 6.42
         <abbr lang="en" title="KiloBytes">
          KB
         </abbr>
         )
        </span>
        , contiene la lista de tipos
        <abbr title="Multipurpose Internet Mail Extensions">
            MIME
        </abbr>
        reconocidos por el servidor.
    </p>
    <p>
        Este módulo aporta varias directivas interesantes para configurar los tipos
        <abbr title="Multipurpose Internet Mail Extensions">
            MIME
        </abbr>
        :
        <strong>
            AddType,
            <code>
                ForceType
            </code>
        </strong>
        y la obsoleta
        <strong>
            DefaultType.
        </strong>
    </p>
    <ul class="lista_verificacion">
        <li>
            DefaultType sirve para establecer la cabecera Content-Type a cualquier archivo cuyo
            <abbr title="Multipurpose Internet Mail Extensions">
                MIME
            </abbr>
            no pueda determinarse
            desde la extensión del archivo. Esta directiva está obsoleta desde la versión 2.2.7 de Apache y no
            debería usarse.
        </li>
        <li>
            ForceType
            <strong>
            </strong>
            hace que todos los archivos dentro de un directorio sean servidos con el
            tipo
            <abbr title="Multipurpose Internet Mail Extensions">
                MIME
            </abbr>
            que se
            establezca (en la cabecera Content-Type se pondrá el tipo
            <abbr title="Multipurpose Internet Mail Extensions">
                MIME
            </abbr>
            especificado en dicha
            directiva). Solo se podrá usar dentro de un contexto de directorio (secciones
            Directory,
            <code>
                Files
            </code>
            y Location, por ejemplo) y archivos .htaccess.
        </li>
        <li>
            AddType permite indicar que tipo
            <abbr title="Multipurpose Internet Mail Extensions">
                MIME
            </abbr>
            debe usarse para una o más extensiones concretas. Suele usarse para indicar
            el tipo
            <abbr title="Multipurpose Internet Mail Extensions">
                MIME
            </abbr>
            de extensiones
            no reconocidas por Apache o el sistema operativo. Por ejemplo, si en nuestro servidor la imágenes en
            formato
            <abbr title="Portable Network Graphics">
                PNG
            </abbr>
            están almacenadas con
            extensión .imagen, con esta directiva podemos indicar que los archivos con extensión&nbsp;.imagen tienen
            el tipo
            <abbr title="Multipurpose Internet Mail Extensions">
                MIME
            </abbr>
            image/png.
        </li>
    </ul>
    <p>
        Veamos algunos ejemplos. Imaginemos que queremos que cualquier archivo dentro de una carpeta
        concreta (/var/www/html/misimagenes por ejemplo), independientemente de la extensión que tenga, se sirva
        como una imagen
        <abbr title="Portable Network Graphics">
            PNG
        </abbr>
        . Podríamos usar la
        siguiente configuración:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;Directory /var/www/html/misimagenes&gt;
    ForceType image/png
&lt;/Directory&gt;</pre>
        </div>
    </div>
    <p>
        Esto hará que cuando se sirva contenido de dicha carpeta, el navegador siempre pondrá la
        cabecera Content-Type: image/png, sea cual sea la extensión, por ejemplo:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>$ nc localhost 80
GET /misimagenes/archivo.html HTTP\1.1
Host: localhost

HTTP/1.1 200 OK
Date: Mon, 05 Jun 2017 18:30:44 GMT
Server: Apache/2.4.12 (Ubuntu)
Last-Modified: Mon, 05 Jun 2017 18:29:28 GMT
ETag: "0-5513aaef542d5"
Accept-Ranges: bytes
Content-Length: 0
Connection: close
&lt;strong&gt;Content-Type: image/png
&lt;/strong&gt;</pre>
        </div>
    </div>
    <p>
        En el ejemplo anterior, aunque el archivo solicitado tiene la extensión .html el
        <code>
            Content-Type
        </code>
        indicado es el de una imagen.&nbsp; Hay que tener cuidado con la
        directiva&nbsp;ForceType porque puede provocar que el navegador no llegue a mostrar contenido si el tipo
        <abbr title="Multipurpose Internet Mail Extensions">
            MIME
        </abbr>
        no corresponde con el
        contenido real.
    </p>
    <p>
        Imaginemos ahora que queremos que nuestro servidor web sirva cualquier archivo con extensión
        .imagen como si fuera una imagen en formato
        <abbr title="Portable Network Graphics">
            PNG
        </abbr>
        , en este caso podríamos usar la directiva AddType de la siguiente forma:
    </p>
    <div class="pre-code">
        <div>
            <pre ngNonBindable>AddType image/png imagen</pre>
        </div>
    </div>
    <p>
        Esta directiva podemos usarla en muchos contextos: a nivel global, dentro de un
        <span lang="en">
         host
        </span>
        virtual, dentro del contexto directorio y en un archivo .htaccess.
    </p>
</div><h1 class="title">
    8.- Autenticación y control de acceso.
</h1><div class="iDevice_content">
    <p>
        La reunión tuvo lugar.&nbsp;El equipo de
        <strong>
            BK Programación
        </strong>
        destinado
        al proyecto de aplicaciones web para varias sucursales de una empresa llegó a un acuerdo para la
        <strong>
            autenticación y el control de acceso sobre la aplicación de panel de control
        </strong>
        . Se
        barajaron varias alternativas: usuarios del sistema, ficheros de usuarios, base de datos
        <abbr title="Structured Query Language">
            SQL
        </abbr>
        y
        <abbr title="Lightweight Directory Access Protocol">
            LDAP
        </abbr>
        .
    </p>
    <p style="text-align: center;">
    </p>
    <p>
        Al final se decantaron por dos opciones:
        <strong>
            ficheros de usuarios
        </strong>
        para
        el estado de pruebas y
        <strong>
            <abbr title="Lightweight Directory Access Protocol">
                LDAP
            </abbr>
        </strong>
        para la aplicación definitiva, con lo cual establecieron el
        siguiente protocolo de actuación:
    </p>
    <ol class="auto-numbered" style="list-style-type: decimal;">
        <li>
            En la aplicación de desarrollo montada por
            <strong>
                María
            </strong>
            se realizarán las pruebas,
            siendo los encargados de las mismas
            <strong>
                Ana
            </strong>
            y
            <strong>
                Carlos.
            </strong>
        </li>
        <li>
            El diseño web de la aplicación recaerá en
            <strong>
                Ana:
            </strong>
            <span lang="en">
            banners
           </span>
            ,
            logos ...
        </li>
        <li>
            <strong>
                Juan
            </strong>
            se dedicará a la programación del panel de control: autenticación por medio
            de
            <abbr title="Lightweight Directory Access Protocol">
                LDAP.
            </abbr>
        </li>
        <li>
            La encargada de montar el servicio
            <abbr title="Lightweight Directory Access Protocol">
                LDAP
            </abbr>
            , integrarlo en Apache y conseguir el control de acceso fue
            <strong>
                María.
            </strong>
        </li>
    </ol>
    <p>
        Mientras se espera que
        <strong>
            María
        </strong>
        instale y configure Apache con
        <abbr title="Lightweight Directory Access Protocol">
            LDAP
        </abbr>
        , no se puede probar la
        autenticación por
        <abbr title="Lightweight Directory Access Protocol">
            LDAP
        </abbr>
        ,
        &nbsp;por lo que
        <strong>
            María
        </strong>
        crea un fichero de usuarios para autenticarse en la aplicación
        y todos empiezan a trabajar en el resto de las cosas.
    </p>
</div><h1 class="title">
    8.2.- Autenticar usuarios en apache mediante LDAP.
</h1><div class="iDevice_content">
    <p>
        Se ha comentado en el apartado anterior que el servidor web Apache permite la
        autenticación de usuarios mediante
        <abbr title="Lightweight Directory Access Protocol">
            LDAP
        </abbr>
        , es decir, utilizando como proveedor de autenticación el servicio de directorio
        <abbr title="Lightweight Directory Access Protocol">
            LDAP
        </abbr>
        . En este apartado vamos a
        ver como se podría configurar una autenticación basada en
        <abbr title="Lightweight Directory Access Protocol">
            LDAP
        </abbr>
        en un servidor web Apache usando
        Ubuntu o Debian.
    </p>
    <p>
        ¿Qué módulos lo hacen posible?&nbsp;Se consigue mediante los módulos mod_ldap y
        <code>
            mod_authnz_ldap
        </code>
        . Recuerda que para activar dichos módulos en una distribución de Debian y
        Ubuntu actual puedes usar los siguientes comandos:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>$ sudo a2enmod ldap
$ sudo a2enmod authnz_ldap </pre>
        </div>
    </div>
    <p>
        <br>
        <br>
        <br/><br/></p>
</div><h1 class="title">
    8.3.- Otras formas de limitar el acceso a recursos.
</h1><div class="iDevice_content">

    <p>
        Existen situaciones en las que tenemos que limitar el acceso a recursos en base a otros
        parámetros diferentes a usuario y contraseña. Un caso habitual es simplemente denegar el acceso a todo el
        mundo a una carpeta concreta. Un caso típico es una carpeta que contiene información de configuración de
        una aplicación web. Esto podemos lograrlo con la directiva Require:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;Directory /var/www/html/directorioconaccesoprohibido&gt;
&lt;strong&gt;     Require all denied&lt;/strong&gt;
&lt;/Directory&gt;</pre>
        </div>
    </div>
    <p>
        En el ejemplo anterior la directriz Require all denied, limitará el acceso bajo cualquier
        condición a un recurso concreto (en este caso el recurso /var/www/html/directorioconaccesoprohibido). En
        contraposición, la directriz Require all granted permitiría el acceso a un recurso bajo cualquier
        condición.
    </p>
    <p>
        Otro caso habitual es limitar el acceso a un directorio o VirtualHost en función de la
        dirección
        <abbr title="Internet Protocol">
            IP
        </abbr>
        del cliente web. Si la dirección
        <abbr title="Internet Protocol">
            IP
        </abbr>
        es una concreta podemos permitir el acceso de la
        siguiente forma:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;Directory /var/www/html/directoriolimitadoporip&gt;
&lt;strong&gt;     Require ip 10.20.30.40&lt;/strong&gt;
&lt;/Directory&gt;</pre>
        </div>
    </div>
    <p>
        El módulo de Apache que nos permite el control de acceso basado en
        <abbr title="Internet Protocol">
            IP
        </abbr>
        anterior es el módulo mod_authz_host. En el ejemplo
        anterior la directiva&nbsp;Require limitará el acceso a aquellos clientes web cuya dirección
        <abbr title="Internet Protocol">
            IP
        </abbr>
        sea diferente a la especificada. También podemos
        indicar lo contrario, por ejemplo, permitir el acceso a todos aquellos cuya dirección
        <abbr title="Internet Protocol">
            IP
        </abbr>
        sea diferente a una dada, por ejemplo:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;Directory /var/www/html/directoriolimitadoporip&gt;
     Require &lt;strong&gt;not&lt;/strong&gt; ip 10.20.30.40
&lt;/Directory&gt;</pre>
        </div>
    </div>
    <p>
        Se pueden especificar más de una
        <abbr title="Internet Protocol">
            IP
        </abbr>
        o un rango de direcciones
        <abbr title="Internet Protocol">
            IP
        </abbr>
        . Por ejemplo, en la siguiente configuración se permite el acceso a un recurso
        para todas aquellas direcciones
        <abbr title="Internet Protocol">
            IP
        </abbr>
        que
        comiencen por 10.20.:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;Directory /var/www/html/directoriolimitadoporip&gt;
&lt;strong&gt;     Require ip 10.20&lt;/strong&gt;
&lt;/Directory&gt;</pre>
        </div>
    </div>
    <p>
        En todos los casos anteriores se devolverá un código de estado 403 (acceso no permitido o
        prohibido).
    </p>
    <p>
        En algunos casos, puede interesar enviar al usuario a otra página
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        cuando se solicite un recurso concreto (por
        ejemplo, si el recurso ha cambiado de lugar). Para eso podemos usar la directiva Redirect. No vamos a
        profundizar en el uso de esta directiva, pero si vamos a ver un pequeño ejemplo. Supongamos que tienes
        configurado un
        <span lang="en">
         host
        </span>
        virtual de la siguiente forma:
    </p>
    <div class="pre-code">
        <div>
         <pre ngNonBindable>&lt;VirtualHost *:80&gt;
    ServerName www.miejemplo.local
    DocumentRoot /var/www/html/directoriolimitado
&lt;strong&gt;    Redirect /recursoantiguo http://www.miejemplo.local/recursonuevo&lt;/strong&gt;
&lt;/VirtualHost&gt;</pre>
        </div>
    </div>
    <p>
        En esta configuración cuando el cliente accede a la
        <abbr title="Uniform Resource Locator">
            URL
        </abbr>
        http://www.miejemplo.local/recursoantiguo es
        redirigido a http://www.miejemplo.local/recursonuevo de forma transparente al usuario. La directiva
        Redirect depende del módulo mod_alias.
    </p>
</div><h1 class="title">
    9.- Acceso a carpetas seguras.
</h1><div class="iDevice_content">
    <p style="text-align: center;">
    </p>
    <p>
        En el transcurso del proyecto sobre aplicaciones web de varias sucursales para una
        empresa en las oficinas de la empresa
        <strong>
            BK Programación
        </strong>
        tuvo lugar la siguiente charla:
    </p>
    <p>
        Bien
        <span>
           —
          </span>
        le dijo
        <strong>
            Ana
        </strong>
        a
        <strong>
            Ada
            <span>
            —
           </span>
            ,
        </strong>
        ya tenemos casi configurado el servidor web Apache.
    </p>
    <p>
          <span>
           —
          </span>
        ¿Entonces?
        <span>
           —
          </span>
        preguntó
        <strong>
            Ada.
        </strong>
    </p>
    <p>
          <span>
           —
          </span>
        Nos falta la configuración de la navegación de forma segura, para que
        la comunicación viaje cifrada.
    </p>
    <p>
          <span>
           —
          </span>
        ¿Os llevará mucho tiempo?
    </p>
    <p>
          <span>
           —
          </span>
        Bueno,
        <strong>
            María
        </strong>
        nos ha dicho a mi y a Carlos
        lo que tenemos que ir haciendo, pero ya sabes, estamos en prácticas, necesitaremos un poco de ayuda y
        supervisión.
    </p>
    <p>
        —Eso lo puedes dar por supuesto. ¡Manos a la obra!&nbsp;—concluyó
        <strong>
            Ada.
        </strong>
    </p>
</div><h1 class="title">
    9.1.- Certificados digitales, AC y PKI.
</h1><div class="iDevice_content">

    <p>
        Un certificado digital es un documento electrónico que asocia una clave pública con la
        identidad de su propietario, individuo o máquina, por ejemplo un servidor web, y es emitido por
        autoridades en las que pueden confiar los usuarios. Éstas certifican el documento de asociación entre
        clave pública e identidad de un individuo o máquina (servidor web) firmando dicho documento con su clave
        privada, esto es, mediante firma digital.
    </p>
    <p class="destacado_inline">
        <strong>
            La idea consiste en que los dos extremos de una
            comunicación, por ejemplo
            <em>
                cliente (navegador web) y servidor (servidor web Apache)
            </em>
            <em>
                puedan
                confiar directamente entre sí, si ambos tienen relación con una tercera parte, que da fe de la
                fiabilidad de los dos
            </em>
            , aunque en la práctica te
            <em>
                suele interesar solamente la fiabilidad del
                servidor
            </em>
            , para saber que te conectas con el servidor que quieres y no con otro servidor
            -supuestamente cuando tú te conectas con el navegador al servidor eres tú y no otra persona la que
            establece la conexión-. Así
            <em>
                l
            </em>
            <em>
                a necesidad de una
            </em>
            <em>
                Tercera Parte Confiable
            </em>
            (
            <abbr title="Tercera Parte Confiable.">
                TPC
            </abbr>
            ó
            <abbr title="Trusted Third Party">
                TTP
            </abbr>
            ,
            <span lang="en">
          Trusted Third Party
         </span>
            )
            <em>
                es fundamental
            </em>
            <em>
                en
                cualquier entorno de clave pública
            </em>
            .
        </strong>
    </p>
    <p>
        <span style="font-size: 1em;">
         La forma en que esa tercera parte avalará que el
                certificado es de fiar es mediante su firma digital sobre el certificado. Por tanto, podremos confiar en
                cualquier certificado digital firmado por una tercera parte en la que confiamos. La
        </span>
        <strong style="font-size: 1em;">
            <abbr title="Tercera Parte Confiable">
                TPC
            </abbr>
        </strong>
        <span style="font-size: 1em;">
         que se encarga de la firma digital de los certificados de los usuarios de un
                entorno de clave pública se conoce con el nombre de
        </span>
        <strong style="font-size: 1em;">
            Autoridad de
            Certificación (
            <abbr title="Autoridad de certificación">
                AC
            </abbr>
        </strong>
        <strong style="font-size: 1em;">
            )
        </strong>
        <span style="font-size: 1em;">
         .
        </span>
    </p>
    <p>
        El modelo de confianza basado en
        <strong>
            Terceras Partes Confiables
        </strong>
        es la base
        de la definición de las
        <strong>
            Infraestructuras de Clave Pública (
            <abbr title=" Infraestructuras de Clave Pública">
                ICP
            </abbr>
        </strong>
        <strong>
            o
            <abbr title="Public Key Infrastructures">
                PKI
            </abbr>
        </strong>
        <strong>
            ,
            <span lang="en">
          Public
                  Key Infrastructures
         </span>
        </strong>
        <strong>
            )
        </strong>
        . Una Infraestructura de Clave Pública es un
        conjunto de protocolos, servicios y estándares que soportan aplicaciones basadas en criptografía de clave
        pública.
    </p>
    <p>
        Algunos de los servicios ofrecidos por una
        <strong>
            <abbr title="Infraestructura de Clave Pública">
                ICP
            </abbr>
            (
            <abbr title="Public Key Infrastructures">
                PKI
            </abbr>
            )
        </strong>
        son los siguientes:
    </p>
    <ul class="lista_verificacion">
        <li>
            <strong>
                Registro de claves
            </strong>
            : emisión de un nuevo certificado para una clave pública.
        </li>
        <li>
            <strong>
                Revocación de certificados
            </strong>
            : cancelación de un certificado previamente emitido.
        </li>
        <li>
            <strong>
                Selección de claves
            </strong>
            : publicación de la clave pública de los usuarios.
        </li>
        <li>
            <strong>
                Evaluación de la confianza
            </strong>
            : determinación sobre si un certificado es válido y qué
            operaciones están permitidas para dicho certificado.
        </li>
        <li>
            <strong>
                Recuperación de claves
            </strong>
            : posibilidad de recuperar las claves de un usuario.
        </li>
    </ul>

    <p>
        <br>
        Las
        <strong>
            <abbr title="Infraestructura de Clave Pública">
                ICP
            </abbr>
            (
            <abbr title="Public Key Infrastructures">
                PKI
            </abbr>
            )
        </strong>
        están compuestas por:
        <br/></p>
    <ul class="lista_verificacion">
        <li>
            <strong>
                Autoridad de Certificación (
                <abbr title="Autoridad de Certificación">
                    AC
                </abbr>
                )
            </strong>
            : realiza la firma de los certificados con
            su clave privada y gestiona la lista de certificados revocados.
        </li>
        <li>
            <strong>
                Autoridad de Registro (
                <abbr title="Autoridad de registro">
                    AR
                </abbr>
            </strong>
            <strong>
                )
            </strong>
            : es la interfaz hacia el mundo
            exterior. Recibe las solicitudes de los certificados y revocaciones, comprueba los datos de los sujetos
            que hacen las peticiones y traslada los certificados y revocaciones a la
            <strong>
                <abbr title="Autoridad de Certificación">
                    AC
                </abbr>
            </strong>
            para que los firme.
        </li>
    </ul>
    <p>
        Existen varios formatos para certificados digitales, pero los más comúnmente empleados se
        rigen por el estándar
        UIT-T
        X.509
        . El certificado X.509 contiene los
        siguientes campos:
    </p>
    <ul class="lista_verificacion">
        <li>
            versión;
        </li>
        <li>
            <abbr title="Número">
                nº
            </abbr>
            de serie del certificado;
        </li>
        <li>
            identificador del algoritmo de firmado;
        </li>
        <li>
            nombre del emisor;
        </li>
        <li>
            periodo de validez;
        </li>
        <li>
            nombre del sujeto;
        </li>
        <li>
            información de clave pública del sujeto;
        </li>
        <li>
            identificador único del emisor;
        </li>
        <li>
            identificador único del sujeto;
        </li>
        <li>
            extensiones.
        </li>
    </ul>
    <div class="exe-tooltip-text" id="t01808028-2c5f-6719-ccec-f0dda0e4e29f">
        <p>
            <b>
                Unión Internacional de Telecomunicaciones.
            </b>
            Es la organización de las Naciones Unidas para
            las tecnologías de la información y la comunicación. En su calidad de coordinador mundial de gobiernos y
            sector privado, la función de la
            <abbr title="Unión Internacional de Telecomunicaciones">
                UIT
            </abbr>
            abarca tres sectores fundamentales, a
            saber: radiocomunicaciones, normalización y desarrollo.
        </p>
    </div>
</div><h1 class="title">
    9.2.- Módulo ssl para apache.
</h1><div class="iDevice_content">
    <p>
        Todos los días los bancos efectúan transferencias bancarias, así como también aceptan
        conexiones a sus páginas web para ofrecer su servicio
        <span lang="en">
           online
          </span>
        . ¿Qué pasaría si
        cualquiera pudiese interceptar una comunicación bancaria de ese tipo? ¿Sería interesante cifrar la
        información a enviar antes y durante la conexión bancaria?
    </p>
</div><h1 class="title">
    9.3.- Crear un servidor virtual seguro en Apache (I).
</h1><div class="iDevice_content">
    <p>
        Cuando instalamos Apache desde repositorio en
        <span lang="en">
         Debian y Ubuntu
        </span>
        ,
        Apache posee por defecto en su instalación el fichero
        /etc/apache2/sites-available/default-ssl.conf
        <span class="tamano">
         (zip - 2.7
         <abbr lang="en" title="KiloBytes">
          KB
         </abbr>
         )
        </span>
        , que contiene la
        configuración por defecto de
        <abbr title="Secure Sockets Layer">
            SSL
        </abbr>
        . En su
        contenido podemos ver las siguientes líneas:
    </p>
    <div class="codigo elemento_centrado" style="width: 39em;">
        <div class="texto_izquierda">
         <pre ngNonBindable>SSLEngine on
</pre>
            <pre ngNonBindable>SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem
</pre>
            <pre ngNonBindable>SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key
</pre>
        </div>
    </div>
    <p>
        donde,
    </p>
    <ul class="lista_verificacion">
        <li>
            SSLEngine on : activa o desactiva
            <abbr title="Secure Sockets Layer">
                SSL
            </abbr>
            a nivel global, o como en este caso, dentro de un
            <span lang="en">
          host
         </span>
            virtual. Para desactivarlo usaríamos SSLEngine off. Aunque por defecto está desactivado.
        </li>
        <li>
            SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem : certificado digital del
            propio servidor Apache
        </li>
        <li>
            SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key: clave privada del
            servidor Apache.
        </li>
    </ul>
    <p>
        Esas líneas lo que quieren decir es que Apache permite conexiones
        <abbr title="Secure Sockets Layer">
            SSL
        </abbr>
        y posee un certificado digital autofirmado por sí
        mismo, ya que Apache actúa como entidad certificadora.
    </p>
    <p>
        Cuando activaste el módulo mod_ssl, mediante el comando a2enmod ssl&nbsp;permitiste que
        Apache atienda el protocolo
        <abbr title="Secure Sockets Layer">
            SSL
        </abbr>
        . Así que, si
        ahora lanzas un navegador
        <strong>
         <span lang="en">
         </span>
        </strong>
        como
        <strong>
            Firefox
        </strong>
        con la
        dirección de tu servidor web Apache mediante el protocolo
        <abbr title="Hypertext Transfer Protocol Secure">
            HTTPS
        </abbr>
        , verás una imagen similar a la
        siguiente:
    </p>

    <p>
        <span style="font-size: 1em;">
         Lo que indica que el certificado digital del servidor no
                viene firmado por una
        </span>
        <strong style="font-size: 1em;">
            <abbr title="Autoridad de Certificación">
                AC
            </abbr>
        </strong>
        <span style="font-size: 1em;">
         contenida en la
                lista que posee el navegador, sino por el mismo Apache. Si lo compruebas haciendo clic en
        </span>
        <strong style="font-size: 1em;">
            Detalles Técnicos
        </strong>
        <span style="font-size: 1em;">
         verás algo similar
                a:
        </span>
    </p>
    <div class="codigo elemento_centrado" style="width: 39em;">
        <div class="texto_izquierda">
         <pre ngNonBindable>192.168.200.250 usa un certificado de seguridad no válido.
</pre>
            <pre ngNonBindable>     No se confía en el certificado porque está autofirmado.
</pre>
            <pre ngNonBindable>     El certificado sólo es válido para debian-servidor-fp.
</pre>
            <pre ngNonBindable>     (Código de error: sec_error_untrusted_issuer)
</pre>
        </div>
    </div>
    <p>
        Ahora tienes dos opciones: Confiar en el certificado o no.
    </p>
    <ul class="lista_verificacion">
        <li>
            Si confías haces clic en "
            <strong>
                Entiendo los riesgos"
            </strong>
            y
            <strong>
                "Añadir excepción".
            </strong>
            Una vez que confías puedes, antes de "
            <strong>
                Confirmar excepción de seguridad",
            </strong>
            ver
            el contenido del certificado. Si estás de acuerdo la comunicación se establece y la información viaja
            cifrada.
            <strong>
            </strong>
        </li>
        <li>
            Si no confías haces clic en "
            <strong>
                ¡Sácame de aquí!"
            </strong>
        </li>
    </ul>
    <p>
        ¿Pero...? Como eres
        <abbr title="Autoridad de Certificación">
            AC
        </abbr>
        puedes
        firmar certificados e incluso puedes generar también tu propio certificado autofirmado similar al que
        viene por defecto en Apache.
    </p>
</div><h1 class="title">
    9.3.1.- Crear un servidor virtual seguro en Apache (II).
</h1><div class="iDevice_content">
    <p>
        Generar un certificado digital autofirmado no es algo tan complejo. ¿Quieres ver cuál
        sería, en una distribución
        <span lang="en">
         Debian
        </span>
        o Ubuntu, el procedimiento para generar un
        certificado digital?
    </p>
    <p>
        Sería el siguiente:
    </p>
    <ol class="auto-numbered" start="3" style="list-style-type: decimal;">
        <li>
            Instalación del paquete
            <span lang="en">
          openssl
         </span>
            <div class="pre-code">
                <div>
                    <pre ngNonBindable>$ apt-get install openssl</pre>
                </div>
            </div>
        </li>
        <li>
            Crear un certificado autofirmado para el servidor web.
            <div class="pre-code">
                <div>
           <pre ngNonBindable>$ mkdir /etc/apache2/tus-ssl/
$ make-ssl-cert /usr/share/ssl-cert/ssleay.cnf /etc/apache2/tus-ssl/apache.pem</pre>
                </div>
            </div>
            <p>
                En el ejemplo anterior el certificado se creará en el directorio /etc/apache2/tus-ssl/, aunque podría
                ser otro. Sea cual sea el lugar donde pongas el certificado, no olvides que bajo ningún concepto puede
                estar en el&nbsp;DocumenRoot (ni en ningún subdirectorio del mismo), dado que representaría un
                problema grave de seguridad.
            </p>
        </li>
        <li>
            En el proceso de creación del certificado, se solicitarán varios datos. Cuando se solicite el nombre
            del servidor
            <abbr title="HyperText Transfer Protocol">
                HTTP
            </abbr>
            o nombre del sistema,
            se debe indicar el nombre
            <abbr title="Domain Name System">
                DNS
            </abbr>
            que corresponda a
            la
            <abbr title="Internet Protocol">
                IP
            </abbr>
            del certificado, por
            ejemplo:&nbsp;autofirmado.ssl.empresa-proyecto.com.
        </li>
    </ol>

    <p>
        El fichero generado /etc/apache2/tus-ssl/apache.pem contiene tanto el certificado del
        servidor como la clave privada asociada al mismo.
    </p>
    <p>
        El comando, de
        <span lang="en">
         Debian y Ubuntu
        </span>
        ,
        make-ssl-cert
        permite generar certificados autofirmados para pruebas. Los datos
        de configuración del certificado a generar se indican en /usr/share/ssl-cert/ssleay.cnf. Internamente hace
        uso de las utilidades de la librería
        <strong>
         <span lang="en">
          openssl
         </span>
        </strong>
        .
    </p>
</div><h1 class="title">
    9.3.2.- Crear un servidor virtual seguro en Apache (III).
</h1><div class="iDevice_content">

    <p>
        De forma genérica, por si no posees el comando make-ssl-cert, puedes emplear el software
        openssl para generar los certificados. Supongamos nuevamente que estamos usando Ubuntu o Debian. ¿Cómo
        podríamos usarlo? Veamos:
    </p>
    <ol>
        <li>
            <p>
                Instalación del paquete openssl.
            </p>
            <div class="codigo elemento_centrado" style="width: 18.65em;">
                <div class="texto_izquierda">
                    <pre ngNonBindable>$ apt-get install openssl</pre>
                </div>
            </div>
        </li>
        <li>
            <p>
                Generación del certificado y de la clave privada de tu autoridad de certificación
                (
                <abbr title="Autoridad de Certificación">
                    AC
                </abbr>
                ). En primer lugar creamos la carpeta donde
                se generará el certificado y accedemos a ella:
            </p>
            <div class="codigo elemento_centrado" style="width: 20.85em;">
                <div class="texto_izquierda">
                    <pre ngNonBindable>$ mkdir /etc/apache2/tus-ssl/</pre>
                    <pre ngNonBindable>$ cd /etc/apache2/tus-ssl/</pre>
                </div>
            </div>
            <p>
                Después ejecutamos el siguiente comando:
            </p>
            <div class="codigo elemento_centrado" style="width: 43.4em;">
                <div class="texto_izquierda">
                    <pre ngNonBindable>$ openssl req -new -nodes -keyout tupaginaweb.key -out tupaginaweb.csr</pre>
                </div>
            </div>
            <p>
                Este comando genera dos archivos:
            </p>
            <ul class="lista_verificacion">
                <li>
                    El archivo de la clave privada, con el que firmarás tus futuros certificados:&nbsp;tupaginaweb.key
                </li>
                <li>
                    El archivo del certificado con la clave pública de la
                    <abbr title="Autoridad de Certificación">
                        AC
                    </abbr>
                    :&nbsp;tupaginaweb.csr&lt;br /&gt;&lt;br /&gt;
                </li>
            </ul>
            <p>
                Este comando pedirá algunos datos: nombre de empresa, país, contraseña... La
                contraseña, puedes omitirla, pero por seguridad es conveniente crearla para utilizarla cuando firmes
                un certificado
                <abbr title="Secure Sockets Layer">
                    SSL
                </abbr>
                .
            </p>
        </li>
        <li>
            <p>
                Autofirma el certificado. Puedes hacerlo porque eres una
                <abbr title="Autoridad de Certificación">
                    AC
                </abbr>
                , de tal forma que el primer certificado
                que firmas es el de tu propia
                <abbr title="Autoridad de Certificación">
                    AC
                </abbr>
                .
            </p>
            <div class="codigo elemento_centrado" style="width: 57.7em;">
                <div class="texto_izquierda">
                    <pre ngNonBindable>$ openssl x509 -in tupaginaweb.csr -out tupaginaweb.crt -req -signkey tupaginaweb.key -days 3650</pre>
                </div>
            </div>
            <p>
                El campo
                <strong>
           <span lang="en">
            days
           </span>
                    3650
                </strong>
                significa que el certificado
                de tu
                <abbr title="Autoridad de Certificación">
                    AC
                </abbr>
                tardará 10 años en caducar.
            </p>
            <p>
                Puedes ver el resultado de la ejecución de los dos comandos anteriores en el archivo
                openssl_autofirmado.txt
                <span class="tamano">
           (zip - 0.82
           <abbr lang="en" title="KiloBytes">
            KB
           </abbr>
           )
          </span>
                .
            </p>
        </li>
        <li>
            <p>
                Editar la configuración
                <abbr title="Secure Sockets Layer">
                    SSL
                </abbr>
                por defecto en
                el archivo /etc/apache2/sites-available/default-ssl.conf
                <strong>
                </strong>
                para indicar el certificado
                del servidor y su respectiva clave privada asignando los siguientes valores a los parámetros:
            </p>
            <div class="codigo elemento_centrado" style="width: 40.65em;">
                <div class="texto_izquierda">
                    <pre ngNonBindable>SSLEngine on</pre>
                    <pre ngNonBindable>SSLCertificateFile /etc/apache2/tus-ssl/tupaginaweb.crt</pre>
                    <pre ngNonBindable>SSLCertificateKeyFile /etc/apache2/tus-ssl/tupaginaweb.key</pre>
                </div>
            </div>
        </li>
        <li>
            <p>
                Asegúrate que el fichero /etc/apache2/ports.conf
                incluya el
                valor Listen 443
                <strong>
                </strong>
            </p>
        </li>
        <li>
            <p>
                Habilita el módulo mod_ssl&nbsp;y la configuración
                <abbr title="Secure Sockets Layer">
                    SSL
                </abbr>
                por defecto.
            </p>
            <div class="codigo elemento_centrado" style="width: 21.4em;">
                <div class="texto_izquierda">
                    <pre ngNonBindable>a2enmod ssl</pre>
                    <pre ngNonBindable>a2ensite default-ssl </pre>
                    <pre ngNonBindable>/etc/init.d/apache2 restart</pre>
                </div>
            </div>
        </li>
    </ol>
</div><h1 class="title">
    9.4.- Comprobar el acceso seguro al servidor.
</h1><div class="iDevice_content">
    <blockquote class="exe-quote-cite styled-qc">
        <p>
            La manera de estar seguro es no sentirse nunca seguro.
        </p>
        <cite>
            Proverbio español
        </cite>
    </blockquote>
</div><h1 class="title">
    10.- Monitorización del acceso: archivos de registro (logs).
</h1><div class="iDevice_content">
    <p>
          <span style="font-size: 1em;">
           </span>
    </p>
    <p>
          <span>
           —
          </span>
        Eso es lo que queremos saber en todo momento
        <span>
           —
          </span>
        comentó
        María
        <span>
           —
          </span>
        . Recordad que es necesario guardar los archivos de registro al menos durante 1 año
        según la
        <strong>
            <abbr title="Ley de Servicios de la Sociedad de Información y Comercio Electrónico">
                LSSI/CE
            </abbr>
            .
        </strong>
        Tenemos que estar preparados ante cualquier petición de los
        <strong>
           <span lang="en">
            logs
           </span>
        </strong>
        (requerimiento judicial) por parte de las administraciones. Es por
        esto que tú,
        <strong>
            Carlos,
        </strong>
        vas a realizar una batería de pruebas:
    </p>
    <ul class="lista_verificacion">
        <li>
            accesos a páginas existentes y no existentes;
        </li>
        <li>
            búsqueda de listado de ficheros y no solamente el index.html;
        </li>
        <li>
            accesos no permitidos a bases de datos;
        </li>
        <li>
            accesos controlados por
            <abbr title="Internet Protocol">
                IP;
            </abbr>
        </li>
        <li>
            accesos controlados por usuario;
        </li>
        <li>
            <abbr title="etcétera.">
                etc.
            </abbr>
        </li>
    </ul>
    <p>
        —Muy bien, eso está hecho —dijo
        <strong>
            Carlos.
        </strong>
    </p>
</div><h1 class="title">
    10.1.- Directivas para archivos de registro.
</h1><div class="iDevice_content">
    <p>
        Vamos a ver cuales son las directivas principales que nos permiten configurar los
        <span lang="en">
         logs
        </span>
        en Apache. Estas directivas pueden emplazarse en dos contextos: de forma global o
        dentro de
        <span lang="en">
         hosts
        </span>
        virtuales. Las directivas son las siguientes.
    </p>

    <table class="tabla">
        <caption>
            Directivas para archivos de registro.
        </caption>
        <thead>
        <tr>
            <th id="directivias">
                Directivas
            </th>
            <th id="definiciondos">
                Definición
            </th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td scope="row">
                &lt;code&gt;LogFormat
            </td>
            <td headers="definiciondos">
                <p>
                    Directiva que permite indicar el formato que tendrá el archivo de registro (
                    <span lang="en">
             log
            </span>
                    ). Gracias a esta directiva podemos definir que campos relacionados con la
                    petición
                    <abbr title="HiperText Transfer Protocol">
                        HTTP
                    </abbr>
                    queremos incluir en
                    cada entrada del archivo de
                    <span lang="en">
             log
            </span>
                    . Suele usarse especialmente con la
                    directiva TransferLog y
                    <code>
                        CustomLog
                    </code>
                    . Además con esta directiva, podemos crear varios
                    formatos de
                    <span lang="en">
             log
            </span>
                    y darles un nombre al formato en sí (
                    <span lang="en">
             alias
            </span>
                    ).
                </p>
            </td>
        </tr>
        <tr>
            <td scope="row">
                &lt;code&gt;CustomLog
            </td>
            <td headers="definiciondos">
                <p>
                    Directiva que permite indicar el nombre del archivo de registro (
                    <span lang="en">
             log
            </span>
                    ) o
                    programa al que se enviará la información de registro de acceso.
                </p>
                <p>
                </p>
                <p>
                    Esto quiere decir que cada petición
                    <abbr title="HiperText Transfer Protocol">
                        HTTP
                    </abbr>
                    realizada al servidor web será registrada en el archivo indicado o se
                    enviará a un programa concreto. Dependiendo de donde se configure, la información registrada será
                    las peticiones a todo el servidor web (configuración a nivel global), o a un
                    <span lang="en">
             host
            </span>
                    virtual concreto (configuración dentro de un
                    <span lang="en">
             host
            </span>
                    virtual).
                </p>
                <p>
                </p>
                <p>
                    Es una directiva similar a la directiva TransferLog, pero con la particularidad de que permite
                    personalizar el formato de registro empleando los especificadores anteriormente vistos, o bien
                    indicando un formato de
                    <span lang="en">
             log
            </span>
                    declarado con LogFormat.
                </p>
            </td>
        </tr>
        <tr>
            <td scope="row">
                TransferLog
            </td>
            <td headers="definiciondos">
                <p>
                    Es similar a la directiva&nbsp;CustomLog, salvo que no permite especificar el formato de
                    <span lang="en">
             log
            </span>
                    que se usará. Si en algún momento se especifica el formato de
                    <span lang="en">
             log
            </span>
                    con LogFormat,
                    <code>
                        CustomLog
                    </code>
                    usará dicho formato (el más reciente
                    o cercano si se especifican varios formatos con LogFormat). Si no se especifica, utilizará lo que
                    se llama el formato
                    <abbr title="Common Log Format">
                        CLF
                    </abbr>
                    visto antes.
                </p>
            </td>
        </tr>
        <tr>
            <td scope="row">
                ErrorLog
            </td>
            <td headers="definiciondos">
                Directiva que permite registrar todos los errores que encuentre Apache.
                Permite guardar la información en un archivo de registro o bien en syslog. Los errores aquí
                registrados se pueden usar para identificar errores internos y configuraciones erróneas de Apache.
            </td>
        </tr>
        </tbody>
    </table>
    <p>
    </p>
    <p>
        La tabla siguiente muestra la sintaxis y el uso de las anteriores directivas:
    </p>
    <table class="tabla">
        <caption>
            Sintaxis y uso de directivas para archivos de registro
        </caption>
        <tbody>
        <tr>
            <th headers="transfer" rowspan="2" scope="row">
                <p>
                    <strong>
                        <strong>
                            Directiva&nbsp;TransferLog
                        </strong>
                    </strong>
                </p>
            </th>
            <th headers="transfer" scope="row">
                <p>
                    <strong>
                        Sintaxis
                    </strong>
                </p>
            </th>
            <td headers="transfer" scope="row">
                <p style="text-align: left;">
                    TransferLog nombre_fichero_archivo_registro |
                    tubería_para_enviar_al_programa_la_información de_registro
                </p>
            </td>
        </tr>
        <tr>
            <th headers="transfer" scope="row">
                <p>
                    <strong>
                        Uso
                    </strong>
                </p>
            </th>
            <td headers="transfer">
                <p style="text-align: left;">
                    Normalmente se indica primero el formato de
                    <span lang="en">
             log
            </span>
                    a usar:
                    <br>
                    <br>
                    LogFormat &lt;span class="pln"&gt;&lt;/span&gt;&lt;span
                    class="str"&gt;"%h %l %u %t \"%r\" %&gt;s %b \"%&#123;Referer&#125;i\"
                    \"%&#123;User-agent&#125;i\""&lt;/span&gt;&lt;span class="pln"&gt;&lt;/span&gt;
                    <br>
                    <br>
                    Y después el archivo
                    donde se guardarán los
                    <span lang="en">
             logs
            </span>
                    :
                    <br>
                    <br>
                    TransferLog logs/acceso_a_empresa1.log
                    <br/><br/><br/><br/><br/><br/></p>
            </td>
        </tr>
        <tr>
            <th headers="log" rowspan="2" scope="row">
                <p>
                </p>
                <p>
                    <strong>
                        Directiva&nbsp;LogFormat
                    </strong>
                </p>
            </th>
            <th headers="log" scope="row">
                <p>
                    <strong>
                        Sintaxis
                    </strong>
                </p>
            </th>
            <td headers="log">
                <p>
                    LogFormat format|alias_logformat [alias_logformat]
                    <br>
                    <br>
                    Permite definir un formato que se usará
                    en los archivos referenciados por TransferLog y por CustomLog. Cuando tenemos varios formatos
                    podemos incluso ponerle un nombre a un formato para ser usado posteriormente (alias_logformat).
                    <br/><br/></p>
            </td>
        </tr>
        <tr>
            <th headers="log" scope="row">
                <p>
                    <strong>
                        Uso
                    </strong>
                </p>
            </th>
            <td headers="log">
                <p style="text-align: left;">
                    LogFormat "%h %l %u %t \"%r\" %&gt;s %O" common&lt;br
                    /&gt;&lt;br /&gt;"%h %l %u %t \"%r\" %&gt;s %O" sería el formato del
                    <span lang="en">
             log
            </span>
                    y
                    common sería el
                    <span lang="en">
             nickname
            </span>
                    o
                    <span lang="en">
             alias
            </span>
                    del
                    formato.
                    <br>
                    <br>
                    Los
                    <span lang="en">
             nicknames
            </span>
                    o
                    <span lang="en">
             alias
            </span>
                    definidos
                    con&nbsp;LogFormat de forma global, son también visibles dentro de un
                    <span lang="en">
             virtual
                        host
            </span>
                    , por lo que es habitual definir los formatos de
                    <span lang="en">
             log
            </span>
                    solo una
                    vez a nivel global, y usarlos luego a conveniencia dentro de cada
                    <span lang="en">
             host
                        virtual
            </span>
                    .
                    <br/><br/></p>
            </td>
        </tr>
        <tr>
            <th headers="error" rowspan="2" scope="row">
                <p>
                    <strong>
                        Directiva&nbsp;ErrorLog
                    </strong>
                </p>
                <p>
                </p>
            </th>
            <th headers="error" scope="row">
                <p>
                    <strong>
                        Sintaxis
                    </strong>
                </p>
            </th>
            <td headers="error">
                <p style="text-align: left;">
                    ErrorLog nombre_fichero_archivo_registro
                </p>
            </td>
        </tr>
        <tr>
            <th headers="error" scope="row">
                <p>
                    <strong>
                        Uso
                    </strong>
                </p>
            </th>
            <td headers="error">
                <p style="text-align: left;">
                    ErrorLog logs/acceso_a_empresa1.log
                </p>
            </td>
        </tr>
        <tr>
            <th headers="custom" rowspan="2" scope="row">
                <p>
                    <strong>
                        Directiva&nbsp;CustomLog
                    </strong>
                </p>
                <p>
                </p>
            </th>
            <th headers="custom" scope="row">
                <p>
                    <strong>
                        Sintaxis
                    </strong>
                </p>
            </th>
            <td headers="custom">
                <p style="text-align: left;">
                    CustomLog
                    nombre_fichero_archivo_registro|tubería_para_enviar_al_programa_la_información de_registro
                    formato|nickname [variable_de_entorno_opcional]
                </p>
            </td>
        </tr>
        <tr>
            <th headers="custom" scope="row">
                <p>
                    <strong>
                        Uso
                    </strong>
                </p>
            </th>
            <td headers="custom">
                <p style="text-align: left;">
                    Podemos indicar el formato de
                    <span lang="en">
             log
            </span>
                    directamente:
                    <br>
                    <br>
                    CustomLog logs/acceso_a_empresa1.log &lt;span class="str"&gt;"%h %l %u %t
                    \"%r\" %&gt;s %b"&lt;/span&gt;
                    <br>
                    <br>
                    <span class="str">
             Y también podemos hacer referencia a un
                        formato de
             <span lang="en">
              log
             </span>
             previamente definido con la directiva LogFormat, a través
                        de su
             <span lang="en">
              nickname
             </span>
             o
             <span lang="en">
              alias
             </span>
             :
             <br>
             <br>
             CustomLog
                        logs/acceso_a_empresa1.log &lt;span class="str"&gt;common&lt;/span&gt;
            <br/><br/></span>
                    <br/><br/><br/><br/></p>
            </td>
        </tr>
        </tbody>
    </table>
</div><h1 class="title">
    10.2.- Rotación de los archivos de registro (I).
</h1><div class="iDevice_content">
    <p>
        Como los archivos de registro a medida que pasa el tiempo van incrementando su tamaño,
        debe existir una política de mantenimiento de registros para que éstos no consuman demasiados recursos en
        el servidor, así es conveniente
        <strong>
            rotar los archivos de registro
        </strong>
        , esto es, hay que
        depurarlos, comprimirlos y guardarlos. Básicamente tienes dos opciones para rotar tus registros:
    </p>
    <ul class="lista_verificacion">
        <li>
            rotatelogs&nbsp;un programa proporcionado por Apache;
        </li>
        <li>
            logrotate, una utilidad presente en la mayoría de los sistemas
            <abbr title="GNU is Not Unix">
                GNU
            </abbr>
            /
            <span lang="en">
          Linux
         </span>
            .
        </li>
    </ul>
    <p>
        No debes olvidar que la información recopilada en los
        <strong>
            ficheros
            <span lang="en">
          log
         </span>
        </strong>
        se debe conservar al menos durante 1 año por eventuales necesidades
        legales, de este modo, además de rotarlos se opta habitualmente por
        <strong>
            comprimir
            <span lang="en">
          logs
         </span>
        </strong>
        .
    </p>

    <p>
        El comando rotatelogs suele usarse con la directiva CustomLog y
        <code>
            ErrorLog
        </code>
        . ¿Recuerdas que a
        dichas directivas se le podía indicar un programa al que se le enviaría la información de registro de
        acceso? Pues este es un ejemplo. Veamos como se usaría:
    </p>
    <p style="text-align: center;">
        CustomLog "|ruta_rotatelogs ruta_log_a_rotar numero_segundos|tamaño_máximoMB"
        alias_logformat
    </p>
    <p style="text-align: left;">
        La cadena "|ruta_rotatelogs ruta_log_a_rotar numero_segundos|tamaño_máximoMB"
        indica a&nbsp;CustomLog que debe ejecutarse un programa en vez de guardarse en un archivo. Veamos algunos
        ejemplos concretos:
    </p>
    <table class="tabla">
        <caption>
            Ejemplos de uso de rotatelogs en combinación con CustomLog.
        </caption>
        <tbody>
        <tr>
            <th scope="col" width="40%">
                <p>
                    <strong>
                        Ejemplo
                    </strong>
                </p>
            </th>
            <th id="uso" scope="col" width="60%">
                <p>
                    <strong>
                        Comando rotatelogs para implementar el ejemplo
                    </strong>
                </p>
            </th>
        </tr>
        <tr>
            <td headers="ejemplos">
                <p>
                    Rotar el archivo de registro access.log&nbsp;cada 24 horas
                </p>
            </td>
            <td headers="ejemplos">
                <p>
                    CustomLog "|/usr/bin/rotatelogs /var/log/apache2/access.log 86400" common
                </p>
            </td>
        </tr>
        <tr>
            <td headers="ejemplos">
                <p>
                    Rotar el archivo de registro&nbsp;access.log&nbsp; cada vez que alcanza un tamaño
                    de 5
                    <abbr lang="en" title="Megabytes">
                        MB
                    </abbr>
                </p>
            </td>
            <td headers="ejemplos">
                <p>
                    CustomLog "|/usr/bin/rotatelogs /var/log/apache2/access.log 5M" common
                </p>
            </td>
        </tr>
        <tr>
            <td headers="ejemplos">
                <p style="text-align: center;">
                    Rotar el archivo de registro error.log&nbsp;cada vez
                    que alcanza un tamaño de 5 megabytes y el archivo se guardará con el sufijo de formato:
                    <br>
                    <br>
                    <br/><br/></p>
                <p style="text-align: center;">
                    YYYY-mm-dd-HH_MM_SS&lt;br /&gt;&lt;br
                    /&gt;&nbsp;(Año-Mes-Día-Hora_Minutos_Segundos)
                </p>
            </td>
            <td headers="ejemplos" style="text-align: center;">
                ErrorLog "|/usr/bin/rotatelogs
                /var/log/errorlog.%Y-%m-%d-%H_%M_%S 5M" common
            </td>
        </tr>
        <tr>
            <td headers="ejemplos">
                <p>
                    Rotar el archivo de registro&nbsp;access.log&nbsp; cada vez que alcanza un tamaño
                    de 5
                    <abbr lang="en" title="Megabytes">
                        MB
                    </abbr>
                    manteniendo un histórico de 10 archivos (cuando
                    haya más de 10 archivos, se irán borrando los más antiguos).
                    <br>
                    <br>
                    La opción -n solo está
                    disponible a partir de la versión 2.4.5 de Apache.
                    <strong>
                        <strong>
                            <br>
                            <br/></strong>
                    </strong>
                    <br/><br/></p>
            </td>
            <td headers="ejemplos" style="text-align: center;">
                CustomLog "|/usr/bin/rotatelogs -n 10
                /var/log/apache2/access.log 5M" common
            </td>
        </tr>
        </tbody>
    </table>
</div><h1 class="title">
    10.2.1.- Rotación de los archivos de registro (II).
</h1><div class="iDevice_content">

    <p>
        El programa logrotate rota, comprime y envía archivos de registro a diario, semanalmente,
        mensualmente o según el tamaño del archivo. Suele emplearse en una tarea diaria del
        cron
        . Es un programa
        que se puede encontrar de forma habitual en cualquier sistema Linux.
    </p>
    <p>
        En
        <span lang="en">
         Debian
        </span>
        y Ubuntu puedes encontrar los siguientes archivos de
        configuración para logrotate:
    </p>
    <ul class="lista_verificacion">
        <li>
            /etc/logrotate.conf : define los parámetros globales, esto es, los parámetros por defecto de
            logrotate. Puedes encontrar un archivo tipo en el siguiente enlace:
            logrotate.conf
            <span class="tamano">
          (conf - 0.56
          <abbr lang="en" title="KiloBytes">
           KB
          </abbr>
          )
         </span>
        </li>
        <li>
            /etc/logrotate.d/apache2 : define como será el rotado de
            <span lang="en">
          logs para Apache
         </span>
            ,
            todos aquellos parámetros que no se encuentren aquí recogen su valor por omisión del fichero
            /etc/logrotate.conf. Puedes encontrar un archivo tipo en el siguiente enlace:
            logrotate.d/apache2
            <span class="tamano">
          (d_apache2 - 0.54
          <abbr lang="en" title="KiloBytes">
           KB
          </abbr>
          )
         </span>
        </li>
    </ul>
    <table class="tabla">
        <caption>
            Uso de&nbsp;logrotate
        </caption>
        <tbody>
        <tr>
            <th scope="col" width="40%">
                Uso de&nbsp;logrotate
            </th>
            <th scope="col" width="
60%">
                Código concreto a ejecutar
            </th>
        </tr>
        <tr>
            <td>
                <p>
                    <strong>
                        <strong>
                            Comprobar la correcta configuración de la rotación de un
                            <span lang="en">
               log
              </span>
                        </strong>
                    </strong>
                </p>
            </td>
            <td>
                <p>
                </p>
                <div class="pre-code">
                    <div>
                        <pre ngNonBindable> /usr/sbin/logrotate -d /etc/logrotate.d/apache2 </pre>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <p>
                    <strong>
                        Forzar la ejecución de logrotate
                        <br>
                        <br/></strong>
                </p>
            </td>
            <td>
                <div class="pre-code">
                    <div>
                        <pre ngNonBindable>/usr/sbin/logrotate -f /etc/logrotate.conf</pre>
                    </div>
                </div>
                <p style="text-align: left;">
                    <br>
                    <br>
                    <br/><br/></p>
            </td>
        </tr>
        <tr>
            <td>
                <p>
                    <strong>
                        Script básico para ejecutar logrotate diariamente en el cron.
                        <br>
                        <br>
                        Podemos encontrar un ejemplo de este código en /etc/cron.daily/logrotate.
                        <br/><br/></strong>
                </p>
            </td>
            <td>
                <div class="codigo elemento_centrado">
                    <div class="texto_izquierda">
             <pre ngNonBindable> #!/bin/sh
</pre>
                        <pre ngNonBindable>&nbsp;</pre>
                        <pre ngNonBindable>test -x /usr/sbin/logrotate || exit 0
</pre>
                        <pre ngNonBindable>&nbsp;</pre>
                        <pre ngNonBindable>/usr/sbin/logrotate /etc/logrotate.conf
</pre>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <p>
                    <strong>
                        Ejemplo en el que se ha añadido directamente en archivo /etc/crontab el
                        trabajo a ejecutar por cron (para editar este archivo es mejor usar el comando crontab
                        -e).
                    </strong>
                </p>
            </td>
            <td>
                <p>
                </p>
                <div class="codigo elemento_centrado">
                    <div class="texto_izquierda">
             <pre ngNonBindable>               # Rotar logs de apache con logrotate a las 3 am
</pre>
                        <pre ngNonBindable>&nbsp;</pre>
                        <pre ngNonBindable>0 03 * * * root /usr/sbin/logrotate /etc/logrotate.conf &gt; /dev/null 2&gt;&amp;1
</pre>
                    </div>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
    <p>
    </p>
    <div class="exe-tooltip-text" id="t243a3b59-39a8-4c3a-1b5e-0e6928ee67e6">
        <p>
            Programa empleado en sistemas
            <abbr title="GNU is Not Unix">
                GNU
            </abbr>
            /
            <span lang="en">
          Linux
         </span>
            para la automatización de tareas a intervalos regulares: minutos, horas, días,
            ...
        </p>
    </div>
</div><h1 class="title">
    Condiciones y términos de uso de los materiales
</h1><div class="iDevice_content">
    <div title="Información acerca de la licencia de los materiales">
        <p style="margin: 2px 2px;">
            <strong>
                Materiales desarrollados inicialmente por el
                Ministerio de Educación, Cultura y Deporte y actualizados por el profesorado de la Junta de
                Andalucía bajo licencia Creative Commons
                <abbr title="Reconocimiento-NoComercial-CompartirIgual">
                    BY-NC-SA.
                </abbr>
            </strong>
        </p>
        <p style="font-size: 0.8em; margin: 2px 2px;">
            <strong>
            </strong>
        </p>
        <p style="font-size: 0.8em; margin: 2px 2px;">
          <span>
           Antes de cualquier uso leer
                    detenidamente el siguente
          </span>
            Aviso legal
        </p>
    </div>
</div>
